function t(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i=globalThis.parcelRequire6b9f,r=i.register;r("iiXtC",function(t,e){var r=i("8gni8"),s=i("lruYs"),n=i("ixuSB");(0,r.extensions).add(s.ResizePlugin),(0,r.extensions).add(n.TickerPlugin)}),r("lruYs",function(e,r){t(e.exports,"ResizePlugin",()=>n);var s=i("8gni8");class n{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{let t,e;if(this._resizeTo){if(this._cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{let{clientWidth:i,clientHeight:r}=this._resizeTo;t=i,e=r}this.renderer.resize(t,e),this.render()}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}n.extension=s.ExtensionType.Application}),r("ixuSB",function(e,r){t(e.exports,"TickerPlugin",()=>o);var s=i("8gni8"),n=i("dkaQn"),a=i("8oiFU");class o{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,n.UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?a.Ticker.shared:new a.Ticker,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}}o.extension=s.ExtensionType.Application}),r("iAbGq",function(t,e){var r=i("8gni8"),s=i("2zwxK"),n=i("2lYZU");(0,r.extensions).add(n.GraphicsPipe),(0,r.extensions).add(s.GraphicsContextSystem)}),r("2zwxK",function(e,r){t(e.exports,"GraphicsContextSystem",()=>f);var s=i("8gni8"),n=i("pf7tt"),a=i("a5RX0"),o=i("2B1Ep"),l=i("b9YUq"),h=i("gAoGC"),u=i("7Nodn");class d{}class c{constructor(){this.geometry=new n.BatchGeometry,this.instructions=new l.InstructionSet}init(){this.instructions.reset()}}let p=class t{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}init(e){t.defaultOptions.bezierSmoothness=e?.bezierSmoothness??t.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t);let i=(0,u.buildContextBatches)(t),r=0,s=t.batchMode,n=!0;if(t.customShader||"no-batch"===s)n=!1;else if("auto"===s){for(let t=0;t<i.length;t++)if((r+=i[t].vertexSize)>400){n=!1;break}}e=this._gpuContextHash[t.uid]={isBatchable:n,batches:i},t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_returnActiveBatchers(){for(let t=0;t<this._activeBatchers.length;t++)(0,h.BigPool).return(this._activeBatchers[t]);this._activeBatchers.length=0}_initContextRenderData(t){let e=(0,h.BigPool).get(c),i=this._gpuContextHash[t.uid].batches,r=0,s=0;i.forEach(t=>{t.applyTransform=!1,r+=t.geometryData.vertices.length,s+=t.geometryData.indices.length});let n=(0,h.BigPool).get(o.Batcher);this._activeBatchers.push(n),n.ensureAttributeBuffer(r),n.ensureIndexBuffer(s),n.begin();for(let t=0;t<i.length;t++){let e=i[t];n.add(e)}n.finish(e.instructions);let l=e.geometry;l.indexBuffer.setDataWithSize(n.indexBuffer,n.indexSize,!0),l.buffers[0].setDataWithSize(n.attributeBuffer.float32View,n.attributeSize,!0);let u=n.batches;for(let t=0;t<u.length;t++){let e=u[t];e.bindGroup=(0,a.getTextureBatchBindGroup)(e.textures.textures,e.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){let e=new d;return this._gpuContextHash[t.uid]=e,t.on("update",this.onGraphicsContextUpdate,this),t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextUpdate(t){this._needsContextNeedsRebuild.push(t)}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("update",this.onGraphicsContextUpdate,this),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){let e=this._gpuContextHash[t.uid];!e.isBatchable&&this._graphicsDataContextHash[t.uid]&&((0,h.BigPool).return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(t=>{(0,h.BigPool).return(t)})}destroy(){for(let t of this._needsContextNeedsRebuild)this._gpuContextHash[t.uid]&&this.onGraphicsContextDestroy(t);this._needsContextNeedsRebuild.length=0}};p.extension={type:[s.ExtensionType.WebGLSystem,s.ExtensionType.WebGPUSystem,s.ExtensionType.CanvasSystem],name:"graphicsContext"},p.defaultOptions={bezierSmoothness:.5};let f=p}),r("7Nodn",function(e,r){t(e.exports,"buildContextBatches",()=>_);var s=i("ftn2E"),n=i("5dD5i"),a=i("gZLcn"),o=i("fnmLg"),l=i("gAoGC"),h=i("hTmlJ"),u=i("honlU"),d=i("8M1ci"),c=i("lGG0D"),p=i("1RN6a"),f=i("anbT3"),g=i("2cHNY");let x={rectangle:p.buildRectangle,polygon:c.buildPolygon,triangle:f.buildTriangle,circle:u.buildCircle,ellipse:u.buildCircle,roundedRectangle:u.buildCircle},m=new s.Rectangle;function _(t){let e={vertices:[],uvs:[],indices:[]},i=[];for(let r=0;r<t.instructions.length;r++){let s=t.instructions[r];if("texture"===s.action)(function(t,e,i){let{vertices:r,uvs:s,indices:n}=i,o=n.length,u=r.length/2,d=[],c=x.rectangle,p=t.image;m.x=t.dx,m.y=t.dy,m.width=t.dw,m.height=t.dh;let f=t.transform;c.build(m,d),f&&(0,a.transformVertices)(d,f),c.triangulate(d,r,2,u,n,o);let g=p.uvs;s.push(g.x0,g.y0,g.x1,g.y1,g.x3,g.y3,g.x2,g.y2);let _=(0,l.BigPool).get(h.BatchableGraphics);_.indexOffset=o,_.indexSize=n.length-o,_.vertexOffset=u,_.vertexSize=r.length/2-u,_.color=t.style,_.alpha=t.alpha,_.texture=p,_.geometryData=i,e.push(_)})(s.data,i,e);else if("fill"===s.action||"stroke"===s.action){let t="stroke"===s.action,r=s.data.path.shapePath,n=s.data.style,a=s.data.hole;t&&a&&y(a.shapePath,n,null,!0,i,e),y(r,n,a,t,i,e)}}return i}function y(t,e,i,r,s,u){let{vertices:c,uvs:p,indices:f}=u,m=t.shapePrimitives.length-1;t.shapePrimitives.forEach(({shape:t,transform:_},y)=>{let b=f.length,S=c.length/2,T=[],v=x[t.type];if(v.build(t,T),_&&(0,a.transformVertices)(T,_),r){let i=t.closePath??!0;(0,d.buildLine)(T,e,!1,i,c,2,S,f,b)}else if(i&&m===y){0!==m&&console.warn("[Pixi Graphics] only the last shape have be cut out");let t=[],e=T.slice();(function(t){if(!t)return[];let e=t.shapePrimitives,i=[];for(let t=0;t<e.length;t++){let r=e[t].shape,s=[];x[r.type].build(r,s),i.push(s)}return i})(i.shapePath).forEach(i=>{t.push(e.length/2),e.push(...i)}),(0,g.triangulateWithHoles)(e,t,c,2,S,f,b)}else v.triangulate(T,c,2,S,f,b);let P=p.length/2,w=e.texture;if(w!==o.Texture.WHITE){let t=e.matrix;_&&t.append(_.clone().invert()),(0,n.buildUvs)(c,2,S,p,P,2,c.length/2-S,t)}else(0,n.buildSimpleUvs)(p,P,2,c.length/2-S);let C=(0,l.BigPool).get(h.BatchableGraphics);C.indexOffset=b,C.indexSize=f.length-b,C.vertexOffset=S,C.vertexSize=c.length/2-S,C.color=e.color,C.alpha=e.alpha,C.texture=w,C.geometryData=u,s.push(C)})}}),r("5dD5i",function(e,i){function r(t,e,i,r,s,n,a,o=null){let l=0;i*=e,s*=n;let h=o.a,u=o.b,d=o.c,c=o.d,p=o.tx,f=o.ty;for(;l<a;){let a=t[i],o=t[i+1];r[s]=h*a+d*o+p,r[s+1]=u*a+c*o+f,s+=n,i+=e,l++}}function s(t,e,i,r){let s=0;for(e*=i;s<r;)t[e]=0,t[e+1]=0,e+=i,s++}t(e.exports,"buildUvs",()=>r),t(e.exports,"buildSimpleUvs",()=>s)}),r("gZLcn",function(e,i){t(e.exports,"transformVertices",()=>r);function r(t,e,i,r,s){let n=e.a,a=e.b,o=e.c,l=e.d,h=e.tx,u=e.ty;i=i||0,r=r||2,s=s||t.length/r-i;let d=i*r;for(let e=0;e<s;e++){let e=t[d],i=t[d+1];t[d]=n*e+o*i+h,t[d+1]=a*e+l*i+u,d+=r}}}),r("hTmlJ",function(e,r){t(e.exports,"BatchableGraphics",()=>n);var s=i("hmii1");class n{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(t,e,i){let r=this.geometryData.indices;for(let s=0;s<this.indexSize;s++)t[e++]=r[s+this.indexOffset]+i-this.vertexOffset}packAttributes(t,e,i,r){let n=this.geometryData,a=this.renderable,o=n.vertices,l=n.uvs,h=2*this.vertexOffset,u=(this.vertexOffset+this.vertexSize)*2,d=this.color,c=d>>16|65280&d|(255&d)<<16;if(this.applyTransform){let n=(0,s.mixColors)(c,a.groupColor)+(this.alpha*a.groupAlpha*255<<24),d=a.groupTransform,p=r<<16|65535&this.roundPixels,f=d.a,g=d.b,x=d.c,m=d.d,_=d.tx,y=d.ty;for(let r=h;r<u;r+=2){let s=o[r],a=o[r+1];t[i]=f*s+x*a+_,t[i+1]=g*s+m*a+y,t[i+2]=l[r],t[i+3]=l[r+1],e[i+4]=n,e[i+5]=p,i+=6}}else{let s=c+(255*this.alpha<<24);for(let n=h;n<u;n+=2)t[i]=o[n],t[i+1]=o[n+1],t[i+2]=l[n],t[i+3]=l[n+1],e[i+4]=s,e[i+5]=r<<16,i+=6}}get vertSize(){return this.vertexSize}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.vertexOffset=this.vertexOffset,t.vertexSize=this.vertexSize,t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0}}}),r("honlU",function(e,i){t(e.exports,"buildCircle",()=>r);let r={build(t,e){let i,r,s,n,a,o;if("circle"===t.type)i=t.x,r=t.y,a=o=t.radius,s=n=0;else if("ellipse"===t.type)i=t.x,r=t.y,a=t.halfWidth,o=t.halfHeight,s=n=0;else{let e=t.width/2,l=t.height/2;i=t.x+e,r=t.y+l,a=o=Math.max(0,Math.min(t.radius,Math.min(e,l))),s=e-a,n=l-o}if(!(a>=0&&o>=0&&s>=0&&n>=0))return e;let l=Math.ceil(2.3*Math.sqrt(a+o)),h=8*l+(s?4:0)+(n?4:0);if(0===h)return e;if(0===l)return e[0]=e[6]=i+s,e[1]=e[3]=r+n,e[2]=e[4]=i-s,e[5]=e[7]=r-n,e;let u=0,d=4*l+(s?2:0)+2,c=d,p=h,f=s+a,g=n,x=i+f,m=i-f,_=r+g;if(e[u++]=x,e[u++]=_,e[--d]=_,e[--d]=m,n){let t=r-g;e[c++]=m,e[c++]=t,e[--p]=t,e[--p]=x}for(let t=1;t<l;t++){let h=Math.PI/2*(t/l),f=s+Math.cos(h)*a,g=n+Math.sin(h)*o,x=i+f,m=i-f,_=r+g,y=r-g;e[u++]=x,e[u++]=_,e[--d]=_,e[--d]=m,e[c++]=m,e[c++]=y,e[--p]=y,e[--p]=x}f=s,g=n+o,x=i+f,m=i-f,_=r+g;let y=r-g;return e[u++]=x,e[u++]=_,e[--p]=y,e[--p]=x,s&&(e[u++]=m,e[u++]=_,e[--p]=y,e[--p]=m),e},triangulate(t,e,i,r,s,n){if(0===t.length)return;let a=0,o=0;for(let e=0;e<t.length;e+=2)a+=t[e],o+=t[e+1];a/=t.length/2,o/=t.length/2;let l=r;e[l*i]=a,e[l*i+1]=o;let h=l++;for(let r=0;r<t.length;r+=2)e[l*i]=t[r],e[l*i+1]=t[r+1],r>0&&(s[n++]=l,s[n++]=h,s[n++]=l-1),l++;s[n++]=h+1,s[n++]=h,s[n++]=l-1}}}),r("8M1ci",function(e,r){t(e.exports,"buildLine",()=>h);var s=i("6mJyH"),n=i("7mtVz"),a=i("1Yofg");function o(t,e,i,r,s,n,a,o){let l,h;a?(l=r,h=-i):(l=-r,h=i);let u=t-i*s+l,d=e-r*s+h,c=t+i*n+l,p=e+r*n+h;return o.push(u,d),o.push(c,p),2}function l(t,e,i,r,s,n,a,o){let l=i-t,h=r-e,u=Math.atan2(l,h),d=Math.atan2(s-t,n-e);o&&u<d?u+=2*Math.PI:!o&&u>d&&(d+=2*Math.PI);let c=u,p=d-u,f=Math.sqrt(l*l+h*h),g=(15*Math.abs(p)*Math.sqrt(f)/Math.PI>>0)+1,x=p/g;if(c+=x,o){a.push(t,e),a.push(i,r);for(let i=1,r=c;i<g;i++,r+=x)a.push(t,e),a.push(t+Math.sin(r)*f,e+Math.cos(r)*f);a.push(t,e),a.push(s,n)}else{a.push(i,r),a.push(t,e);for(let i=1,r=c;i<g;i++,r+=x)a.push(t+Math.sin(r)*f,e+Math.cos(r)*f),a.push(t,e);a.push(s,n),a.push(t,e)}return 2*g}function h(t,e,i,r,h,u,d,c,p){let f=n.closePointEps;if(0===t.length)return;let g=e.alignment;if(.5!==e.alignment){let e=(0,a.getOrientationOfPoints)(t);i&&(e*=-1),g=(g-.5)*e+.5}let x=new s.Point(t[0],t[1]),m=new s.Point(t[t.length-2],t[t.length-1]),_=Math.abs(x.x-m.x)<f&&Math.abs(x.y-m.y)<f;if(r){t=t.slice(),_&&(t.pop(),t.pop(),m.set(t[t.length-2],t[t.length-1]));let e=(x.x+m.x)*.5,i=(m.y+x.y)*.5;t.unshift(e,i),t.push(e,i)}let y=t.length/2,b=t.length,S=h.length/2,T=e.width/2,v=T*T,P=e.miterLimit*e.miterLimit,w=t[0],C=t[1],M=t[2],k=t[3],B=0,F=0,R=-(C-k),G=w-M,A=0,z=0,U=Math.sqrt(R*R+G*G);R/=U,G/=U,R*=T,G*=T;let I=g,H=(1-I)*2,E=2*I;r||("round"===e.cap?b+=l(w-R*(H-E)*.5,C-G*(H-E)*.5,w-R*H,C-G*H,w+R*E,C+G*E,h,!0)+2:"square"===e.cap&&(b+=o(w,C,R,G,H,E,!0,h))),h.push(w-R*H,C-G*H),h.push(w+R*E,C+G*E);for(let i=1;i<y-1;++i){w=t[(i-1)*2],C=t[(i-1)*2+1],M=t[2*i],k=t[2*i+1],B=t[(i+1)*2],F=t[(i+1)*2+1],U=Math.sqrt((R=-(C-k))*R+(G=w-M)*G),R/=U,G/=U,R*=T,G*=T,U=Math.sqrt((A=-(k-F))*A+(z=M-B)*z),A/=U,z/=U,A*=T,z*=T;let r=M-w,s=C-k,n=M-B,a=F-k,o=r*n+s*a,u=s*n-a*r,d=u<0;if(Math.abs(u)<.001*Math.abs(o)){h.push(M-R*H,k-G*H),h.push(M+R*E,k+G*E),o>=0&&("round"===e.join?b+=l(M,k,M-R*H,k-G*H,M-A*H,k-z*H,h,!1)+4:b+=2,h.push(M-A*E,k-z*E),h.push(M+A*H,k+z*H));continue}let c=(-R+w)*(-G+k)-(-R+M)*(-G+C),p=(-A+B)*(-z+k)-(-A+M)*(-z+F),f=(r*p-n*c)/u,g=(a*c-s*p)/u,x=(f-M)*(f-M)+(g-k)*(g-k),m=M+(f-M)*H,_=k+(g-k)*H,y=M-(f-M)*E,S=k-(g-k)*E,I=d?H:E;x<=Math.min(r*r+s*s,n*n+a*a)+I*I*v?"bevel"===e.join||x/v>P?(d?(h.push(m,_),h.push(M+R*E,k+G*E),h.push(m,_),h.push(M+A*E,k+z*E)):(h.push(M-R*H,k-G*H),h.push(y,S),h.push(M-A*H,k-z*H),h.push(y,S)),b+=2):"round"===e.join?d?(h.push(m,_),h.push(M+R*E,k+G*E),b+=l(M,k,M+R*E,k+G*E,M+A*E,k+z*E,h,!0)+4,h.push(m,_),h.push(M+A*E,k+z*E)):(h.push(M-R*H,k-G*H),h.push(y,S),b+=l(M,k,M-R*H,k-G*H,M-A*H,k-z*H,h,!1)+4,h.push(M-A*H,k-z*H),h.push(y,S)):(h.push(m,_),h.push(y,S)):(h.push(M-R*H,k-G*H),h.push(M+R*E,k+G*E),"round"===e.join?d?b+=l(M,k,M+R*E,k+G*E,M+A*E,k+z*E,h,!0)+2:b+=l(M,k,M-R*H,k-G*H,M-A*H,k-z*H,h,!1)+2:"miter"===e.join&&x/v<=P&&(d?(h.push(y,S),h.push(y,S)):(h.push(m,_),h.push(m,_)),b+=2),h.push(M-A*H,k-z*H),h.push(M+A*E,k+z*E),b+=2)}w=t[(y-2)*2],C=t[(y-2)*2+1],M=t[(y-1)*2],U=Math.sqrt((R=-(C-(k=t[(y-1)*2+1])))*R+(G=w-M)*G),R/=U,G/=U,R*=T,G*=T,h.push(M-R*H,k-G*H),h.push(M+R*E,k+G*E),r||("round"===e.cap?b+=l(M-R*(H-E)*.5,k-G*(H-E)*.5,M-R*H,k-G*H,M+R*E,k+G*E,h,!1)+2:"square"===e.cap&&(b+=o(M,k,R,G,H,E,!1,h)));let W=n.curveEps*n.curveEps;for(let t=S;t<b+S-2;++t)w=h[2*t],C=h[2*t+1],M=h[(t+1)*2],k=h[(t+1)*2+1],B=h[(t+2)*2],Math.abs(w*(k-(F=h[(t+2)*2+1]))+M*(F-C)+B*(C-k))<W||c.push(t,t+1,t+2)}}),r("7mtVz",function(e,i){t(e.exports,"closePointEps",()=>r),t(e.exports,"curveEps",()=>s);let r=1e-4,s=1e-4}),r("1Yofg",function(e,i){t(e.exports,"getOrientationOfPoints",()=>r);function r(t){let e=t.length;if(e<6)return 1;let i=0;for(let r=0,s=t[e-2],n=t[e-1];r<e;r+=2){let e=t[r],a=t[r+1];i+=(e-s)*(a+n),s=e,n=a}return i<0?-1:1}}),r("lGG0D",function(e,r){t(e.exports,"buildPolygon",()=>a);var s=i("2cHNY");let n=[],a={build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return e},triangulate(t,e,i,r,a,o){(0,s.triangulateWithHoles)(t,n,e,i,r,a,o)}}}),r("2cHNY",function(r,s){t(r.exports,"triangulateWithHoles",()=>a);var n=i("lIQYe");function a(t,i,r,s,a,o,l){let h=e(n)(t,i,2);if(!h)return;for(let t=0;t<h.length;t+=3)o[l++]=h[t]+a,o[l++]=h[t+1]+a,o[l++]=h[t+2]+a;let u=a*s;for(let e=0;e<t.length;e+=2)r[u]=t[e],r[u+1]=t[e+1],u+=s}}),r("1RN6a",function(e,i){t(e.exports,"buildRectangle",()=>r);let r={build(t,e){let i=t.x,r=t.y,s=t.width,n=t.height;return s>=0&&n>=0&&(e[0]=i,e[1]=r,e[2]=i+s,e[3]=r,e[4]=i+s,e[5]=r+n,e[6]=i,e[7]=r+n),e},triangulate(t,e,i,r,s,n){let a=0;e[(r*=i)+a]=t[0],e[r+a+1]=t[1],a+=i,e[r+a]=t[2],e[r+a+1]=t[3],a+=i,e[r+a]=t[6],e[r+a+1]=t[7],a+=i,e[r+a]=t[4],e[r+a+1]=t[5],a+=i;let o=r/i;s[n++]=o,s[n++]=o+1,s[n++]=o+2,s[n++]=o+1,s[n++]=o+3,s[n++]=o+2}}}),r("anbT3",function(e,i){t(e.exports,"buildTriangle",()=>r);let r={build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e),triangulate(t,e,i,r,s,n){let a=0;e[(r*=i)+a]=t[0],e[r+a+1]=t[1],a+=i,e[r+a]=t[2],e[r+a+1]=t[3],a+=i,e[r+a]=t[4],e[r+a+1]=t[5];let o=r/i;s[n++]=o,s[n++]=o+1,s[n++]=o+2}}}),r("2lYZU",function(e,r){t(e.exports,"GraphicsPipe",()=>h);var s=i("8gni8"),n=i("eeMzm"),a=i("gAoGC"),o=i("lCwdn"),l=i("hTmlJ");class h{constructor(t,e){this.state=(0,n.State).for2d(),this._graphicsBatchesHash=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){let e=t.context,i=!!this._graphicsBatchesHash[t.uid],r=this.renderer.graphicsContext.updateGpuContext(e);return!!r.isBatchable||i!==r.isBatchable}addRenderable(t,e){let i=this.renderer.graphicsContext.updateGpuContext(t.context);t._didGraphicsUpdate&&(t._didGraphicsUpdate=!1,this._rebuild(t)),i.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){let e=this._graphicsBatchesHash[t.uid];if(e)for(let t=0;t<e.length;t++){let i=e[t];i.batcher.updateElement(i)}}destroyRenderable(t){this._graphicsBatchesHash[t.uid]&&this._removeBatchForRenderable(t.uid)}execute(t){if(!t.isRenderable)return;let e=this.renderer,i=t.context;if(!e.graphicsContext.getGpuContext(i).batches.length)return;let r=i.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;let s=r.resources.localUniforms.uniforms;s.uTransformMatrix=t.groupTransform,s.uRound=e._roundPixels|t._roundPixels,(0,o.color32BitToUniform)(t.groupColorAlpha,s.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){let e=!!this._graphicsBatchesHash[t.uid],i=this.renderer.graphicsContext.updateGpuContext(t.context);e&&this._removeBatchForRenderable(t.uid),i.isBatchable&&this._initBatchesForRenderable(t),t.batched=i.isBatchable}_addToBatcher(t,e){let i=this.renderer.renderPipes.batch,r=this._getBatchesForRenderable(t);for(let t=0;t<r.length;t++){let s=r[t];i.addToBatch(s,e)}}_getBatchesForRenderable(t){return this._graphicsBatchesHash[t.uid]||this._initBatchesForRenderable(t)}_initBatchesForRenderable(t){let e=t.context,i=this.renderer.graphicsContext.getGpuContext(e),r=this.renderer._roundPixels|t._roundPixels,s=i.batches.map(e=>{let i=(0,a.BigPool).get(l.BatchableGraphics);return e.copyTo(i),i.renderable=t,i.roundPixels=r,i});return this._graphicsBatchesHash[t.uid]=s,t.on("destroyed",()=>{this.destroyRenderable(t)}),s}_removeBatchForRenderable(t){this._graphicsBatchesHash[t].forEach(t=>{(0,a.BigPool).return(t)}),this._graphicsBatchesHash[t]=null}destroy(){for(let t in this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null,this._graphicsBatchesHash)this._removeBatchForRenderable(t);this._graphicsBatchesHash=null}}h.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"graphics"}}),r("ft8Xn",function(t,e){var r=i("8gni8"),s=i("bbF0U");(0,r.extensions).add(s.MeshPipe)}),r("bbF0U",function(e,r){t(e.exports,"MeshPipe",()=>d);var s=i("8gni8"),n=i("5lJW7"),a=i("9bUUm"),o=i("1p972"),l=i("gAoGC"),h=i("lCwdn"),u=i("7mU6o");class d{constructor(t,e){this.localUniforms=new o.UniformGroup({uTransformMatrix:{value:new n.Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new a.BindGroup({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){let e=this._getMeshData(t),i=e.batched,r=t.batched;if(e.batched=r,i!==r)return!0;if(r){let i=t._geometry;if(i.indices.length!==e.indexSize||i.positions.length!==e.vertexSize)return e.indexSize=i.indices.length,e.vertexSize=i.positions.length,!0;let r=this._getBatchableMesh(t),s=t.texture;if(r.texture._source!==s._source&&r.texture._source!==s._source)return r.batcher.checkAndUpdateTexture(r,s)}return!1}addRenderable(t,e){let i=this.renderer.renderPipes.batch,{batched:r}=this._getMeshData(t);if(r){let e=this._getBatchableMesh(t);e.texture=t._texture,e.geometry=t._geometry,i.addToBatch(e)}else i.break(e),e.add({renderPipeId:"mesh",mesh:t})}updateRenderable(t){if(t.batched){let e=this._gpuBatchableMeshHash[t.uid];e.texture=t._texture,e.geometry=t._geometry,e.batcher.updateElement(e)}}destroyRenderable(t){this._meshDataHash[t.uid]=null;let e=this._gpuBatchableMeshHash[t.uid];(0,l.BigPool).return(e),this._gpuBatchableMeshHash[t.uid]=null}execute({mesh:t}){if(!t.isRenderable)return;t.state.blendMode=t.groupBlendMode;let e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),(0,h.color32BitToUniform)(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){return this._meshDataHash[t.uid]||this._initMeshData(t)}_initMeshData(t){return this._meshDataHash[t.uid]={batched:t.batched,indexSize:t._geometry.indices?.length,vertexSize:t._geometry.positions?.length},t.on("destroyed",()=>{this.destroyRenderable(t)}),this._meshDataHash[t.uid]}_getBatchableMesh(t){return this._gpuBatchableMeshHash[t.uid]||this._initBatchableMesh(t)}_initBatchableMesh(t){let e=(0,l.BigPool).get(u.BatchableMesh);return e.mesh=t,e.texture=t._texture,e.roundPixels=this.renderer._roundPixels|t._roundPixels,this._gpuBatchableMeshHash[t.uid]=e,e.mesh=t,e}destroy(){for(let t in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[t]&&(0,l.BigPool).return(this._gpuBatchableMeshHash[t]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}d.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"mesh"}}),r("7mU6o",function(e,i){t(e.exports,"BatchableMesh",()=>r);class r{constructor(){this.batcher=null,this.batch=null,this.roundPixels=0}get blendMode(){return this.mesh.groupBlendMode}reset(){this.mesh=null,this.texture=null,this.batcher=null,this.batch=null}packIndex(t,e,i){let r=this.geometry.indices;for(let s=0;s<r.length;s++)t[e++]=r[s]+i}packAttributes(t,e,i,r){let s=this.mesh,n=this.geometry,a=s.groupTransform,o=r<<16|65535&this.roundPixels,l=a.a,h=a.b,u=a.c,d=a.d,c=a.tx,p=a.ty,f=n.positions,g=n.uvs,x=s.groupColorAlpha;for(let r=0;r<f.length;r+=2){let s=f[r],n=f[r+1];t[i]=l*s+u*n+c,t[i+1]=h*s+d*n+p,t[i+2]=g[r],t[i+3]=g[r+1],e[i+4]=x,e[i+5]=o,i+=6}}get vertexSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}}),r("7caoo",function(t,e){var r=i("8gni8"),s=i("gHgkj"),n=i("4FaQx");(0,r.extensions).add(n.CanvasTextSystem),(0,r.extensions).add(s.CanvasTextPipe)}),r("gHgkj",function(e,r){t(e.exports,"CanvasTextPipe",()=>l);var s=i("8gni8"),n=i("2dWUE"),a=i("gAoGC"),o=i("e4dtB");class l{constructor(t){this._gpuText=Object.create(null),this._renderer=t}validateRenderable(t){let e=this._getGpuText(t),i=t._getKey();if(e.currentKey!==i){let i=t.resolution??this._renderer.resolution,{width:r,height:s}=this._renderer.canvasText.getTextureSize(t.text,i,t._style);return 1!==this._renderer.canvasText.getReferenceCount(e.currentKey)||r!==e.texture._source.width||s!==e.texture._source.height}return!1}addRenderable(t,e){let i=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(i)}updateRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e.batcher.updateElement(e)}destroyRenderable(t){this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.canvasText.decreaseReferenceCount(e.currentKey),(0,a.BigPool).return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),i=this._getGpuText(t),r=i.batchableSprite;i.currentKey!==e&&this._updateGpuText(t),t._didTextUpdate=!1;let s=t._style.padding;(0,n.updateQuadBounds)(r.bounds,t._anchor,r.texture,s)}_updateGpuText(t){let e=this._getGpuText(t),i=e.batchableSprite;e.texture&&this._renderer.canvasText.decreaseReferenceCount(e.currentKey);let r=t.resolution??this._renderer.resolution;e.texture=i.texture=this._renderer.canvasText.getTexture(t.text,r,t._style,t._getKey()),e.currentKey=t._getKey(),i.texture=e.texture}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:null,currentKey:"--",batchableSprite:(0,a.BigPool).get(o.BatchableSprite)};return e.batchableSprite.renderable=t,e.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},e.batchableSprite.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,this._updateText(t),t.on("destroyed",()=>{this.destroyRenderable(t)}),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}}l.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"text"}}),r("4FaQx",function(e,r){t(e.exports,"CanvasTextSystem",()=>f);var s=i("2MlJ1"),n=i("8gni8"),a=i("he538"),o=i("04PYF"),l=i("2S2W1"),h=i("2legc"),u=i("5JkHu"),d=i("boNqw"),c=i("fvvf3"),p=i("lgoP7");class f{constructor(){this._activeTextures={}}getTextureSize(t,e,i){let r=(0,d.CanvasTextMetrics).measureText(t||" ",i),s=Math.ceil(Math.ceil(Math.max(1,r.width)+2*i.padding)*e),n=Math.ceil(Math.ceil(Math.max(1,r.height)+2*i.padding)*e);return s=Math.ceil(s-1e-6),n=Math.ceil(n-1e-6),{width:s=(0,a.nextPow2)(s),height:n=(0,a.nextPow2)(n)}}getTexture(t,e,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].texture;let s=(0,d.CanvasTextMetrics).measureText(t||" ",i),n=Math.ceil(Math.ceil(Math.max(1,s.width)+2*i.padding)*e),a=Math.ceil(Math.ceil(Math.max(1,s.height)+2*i.padding)*e),l=(0,o.CanvasPool).getOptimalCanvasAndContext(n,a),{canvas:c}=l;this.renderTextToCanvas(t,i,e,l);let p=(0,u.getPo2TextureFromSource)(c,n,a,e);if(i.trim){let t=(0,h.getCanvasBoundingBox)(c,e);p.frame.copyFrom(t),p.updateUvs()}return this._activeTextures[r]={canvasAndContext:l,texture:p,usageCount:1},p}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];if(e.usageCount--,0===e.usageCount){(0,o.CanvasPool).returnCanvasAndContext(e.canvasAndContext),(0,l.TexturePool).returnTexture(e.texture);let i=e.texture.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",this._activeTextures[t]=null}}getReferenceCount(t){return this._activeTextures[t].usageCount}renderTextToCanvas(t,e,i,r){let n,a;let{canvas:o,context:l}=r,h=(0,c.fontStringFromTextStyle)(e),u=(0,d.CanvasTextMetrics).measureText(t||" ",e),f=u.lines,g=u.lineHeight,x=u.lineWidths,m=u.maxLineWidth,_=u.fontProperties,y=o.height;if(l.resetTransform(),l.scale(i,i),l.clearRect(0,0,u.width+4,u.height+4),e._stroke?.width){let t=e._stroke;l.lineWidth=t.width,l.miterLimit=t.miterLimit,l.lineJoin=t.join,l.lineCap=t.cap}l.font=h;let b=e.dropShadow?2:1;for(let t=0;t<b;++t){let o=e.dropShadow&&0===t,h=o?Math.ceil(Math.max(1,y)+2*e.padding):0,u=h*i;if(o){l.fillStyle="black",l.strokeStyle="black";let t=e.dropShadow,r=t.color,n=t.alpha;l.shadowColor=(0,s.Color).shared.setValue(r).setAlpha(n).toRgbaString();let a=t.blur*i,o=t.distance*i;l.shadowBlur=a,l.shadowOffsetX=Math.cos(t.angle)*o,l.shadowOffsetY=Math.sin(t.angle)*o+u}else l.globalAlpha=e._fill?.alpha??1,l.fillStyle=e._fill?(0,p.getCanvasFillStyle)(e._fill,l):null,e._stroke?.width&&(l.strokeStyle=(0,p.getCanvasFillStyle)(e._stroke,l)),l.shadowColor="black";let d=(g-_.fontSize)/2;g-_.fontSize<0&&(d=0);let c=e._stroke?.width??0;for(let t=0;t<f.length;t++)n=c/2,a=c/2+t*g+_.ascent+d,"right"===e.align?n+=m-x[t]:"center"===e.align&&(n+=(m-x[t])/2),e._stroke&&this._drawLetterSpacing(f[t],e,r,n+e.padding,a+e.padding-h,!0),void 0!==e._fill&&this._drawLetterSpacing(f[t],e,r,n+e.padding,a+e.padding-h)}}_drawLetterSpacing(t,e,i,r,s,n=!1){let{context:a}=i,o=e.letterSpacing,l=!1;if(d.CanvasTextMetrics.experimentalLetterSpacingSupported&&(d.CanvasTextMetrics.experimentalLetterSpacing?(a.letterSpacing=`${o}px`,a.textLetterSpacing=`${o}px`,l=!0):(a.letterSpacing="0px",a.textLetterSpacing="0px")),0===o||l){n?a.strokeText(t,r,s):a.fillText(t,r,s);return}let h=r,u=(0,d.CanvasTextMetrics).graphemeSegmenter(t),c=a.measureText(t).width,p=0;for(let t=0;t<u.length;++t){let e=u[t];n?a.strokeText(e,h,s):a.fillText(e,h,s);let i="";for(let e=t+1;e<u.length;++e)i+=u[e];h+=c-(p=a.measureText(i).width)+o,c=p}}destroy(){this._activeTextures=null}}f.extension={type:[n.ExtensionType.WebGLSystem,n.ExtensionType.WebGPUSystem,n.ExtensionType.CanvasSystem],name:"canvasText"}}),r("2legc",function(e,r){t(e.exports,"getCanvasBoundingBox",()=>o);var s=i("ftn2E");function n(t,e,i){for(let r=0,s=4*i*e;r<e;++r,s+=4)if(0!==t[s+3])return!1;return!0}function a(t,e,i,r,s){let n=4*e;for(let e=r,a=r*n+4*i;e<=s;++e,a+=n)if(0!==t[a+3])return!1;return!0}function o(t,e=1){let{width:i,height:r}=t,o=t.getContext("2d",{willReadFrequently:!0});if(null===o)throw TypeError("Failed to get canvas 2D context");let l=o.getImageData(0,0,i,r).data,h=0,u=0,d=i-1,c=r-1;for(;u<r&&n(l,i,u);)++u;if(u===r)return s.Rectangle.EMPTY;for(;n(l,i,c);)--c;for(;a(l,i,h,u,c);)++h;for(;a(l,i,d,u,c);)--d;return++d,++c,new s.Rectangle(h/e,u/e,(d-h)/e,(c-u)/e)}}),r("5JkHu",function(e,r){t(e.exports,"getPo2TextureFromSource",()=>a);var s=i("2S2W1");let n=new(i("jTAtI")).Bounds;function a(t,e,i,r){n.minX=0,n.minY=0,n.maxX=t.width/r|0,n.maxY=t.height/r|0;let a=(0,s.TexturePool).getOptimalTexture(n.width,n.height,r,!1);return a.source.uploadMethodId="image",a.source.resource=t,a.source.alphaMode="premultiply-alpha-on-upload",a.frame.width=e/r,a.frame.height=i/r,a.source.emit("update",a.source),a.updateUvs(),a}}),r("boNqw",function(e,r){t(e.exports,"CanvasTextMetrics",()=>l);var s=i("fZkkQ"),n=i("fvvf3");let a={willReadFrequently:!0},o=class t{static get experimentalLetterSpacingSupported(){let e=t._experimentalLetterSpacingSupported;if(void 0!==e){let i=(0,s.DOMAdapter).get().getCanvasRenderingContext2D().prototype;e=t._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(t,e,i,r,s,n,a,o,l){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=s,this.lineWidths=n,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=l}static measureText(e=" ",i,r=t._canvas,s=i.wordWrap){let a=`${e}:${i.styleKey}`;if(t._measurementCache[a])return t._measurementCache[a];let o=(0,n.fontStringFromTextStyle)(i),l=t.measureFont(o);0===l.fontSize&&(l.fontSize=i.fontSize,l.ascent=i.fontSize);let h=t.__context;h.font=o;let u=(s?t._wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),d=Array(u.length),c=0;for(let e=0;e<u.length;e++){let r=t._measureText(u[e],i.letterSpacing,h);d[e]=r,c=Math.max(c,r)}let p=i._stroke?.width||0,f=c+p;i.dropShadow&&(f+=i.dropShadow.distance);let g=i.lineHeight||l.fontSize+p,x=Math.max(g,l.fontSize+2*p)+(u.length-1)*(g+i.leading);return i.dropShadow&&(x+=i.dropShadow.distance),new t(e,i,f,x,u,d,g+i.leading,c,l)}static _measureText(e,i,r){let s=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let n=r.measureText(e).width;return n>0&&(s?n-=i:n+=(t.graphemeSegmenter(e).length-1)*i),n}static _wordWrap(e,i,r=t._canvas){let s=r.getContext("2d",a),n=0,o="",l="",h=Object.create(null),{letterSpacing:u,whiteSpace:d}=i,c=t._collapseSpaces(d),p=t._collapseNewlines(d),f=!c,g=i.wordWrapWidth+u,x=t._tokenize(e);for(let e=0;e<x.length;e++){let r=x[e];if(t._isNewline(r)){if(!p){l+=t._addLine(o),f=!c,o="",n=0;continue}r=" "}if(c){let e=t.isBreakingSpace(r),i=t.isBreakingSpace(o[o.length-1]);if(e&&i)continue}let a=t._getFromCache(r,u,h,s);if(a>g){if(""!==o&&(l+=t._addLine(o),o="",n=0),t.canBreakWords(r,i.breakWords)){let e=t.wordWrapSplit(r);for(let a=0;a<e.length;a++){let d=e[a],c=d,p=1;for(;e[a+p];){let s=e[a+p];if(t.canBreakChars(c,s,r,a,i.breakWords))break;d+=s,c=s,p++}a+=p-1;let x=t._getFromCache(d,u,h,s);x+n>g&&(l+=t._addLine(o),f=!1,o="",n=0),o+=d,n+=x}}else{o.length>0&&(l+=t._addLine(o),o="",n=0);let i=e===x.length-1;l+=t._addLine(r,!i),f=!1,o="",n=0}}else a+n>g&&(f=!1,l+=t._addLine(o),o="",n=0),(o.length>0||!t.isBreakingSpace(r)||f)&&(o+=r,n+=a)}return l+t._addLine(o,!1)}static _addLine(e,i=!0){return e=t._trimRight(e),e=i?`${e}
`:e}static _getFromCache(e,i,r,s){let n=r[e];return"number"!=typeof n&&(n=t._measureText(e,i,s)+i,r[e]=n),n}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let i=e.length-1;i>=0;i--){let r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"==typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return"string"==typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let i=[],r="";if("string"!=typeof e)return i;for(let s=0;s<e.length;s++){let n=e[s],a=e[s+1];if(t.isBreakingSpace(n,a)||t._isNewline(n)){""!==r&&(i.push(r),r=""),i.push(n);continue}r+=n}return""!==r&&i.push(r),i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,s){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];let i=t._context;i.font=e;let r=i.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),s={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return t._fonts[e]=s,s}static clearMetrics(e=""){e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let e;try{let i=new OffscreenCanvas(0,0),r=i.getContext("2d",a);if(r?.measureText)return t.__canvas=i,i;e=(0,s.DOMAdapter).get().createCanvas()}catch(t){e=(0,s.DOMAdapter).get().createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",a)),t.__context}};o.METRICS_STRING="|ÉqÅ",o.BASELINE_SYMBOL="M",o.BASELINE_MULTIPLIER=1.4,o.HEIGHT_MULTIPLIER=2,o.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){let t=new Intl.Segmenter;return e=>[...t.segment(e)].map(t=>t.segment)}return t=>[...t]})(),o.experimentalLetterSpacing=!1,o._fonts={},o._newlines=[10,13],o._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],o._measurementCache={};let l=o}),r("fvvf3",function(e,i){t(e.exports,"fontStringFromTextStyle",()=>s);let r=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function s(t){let e="number"==typeof t.fontSize?`${t.fontSize}px`:t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let t=i.length-1;t>=0;t--){let e=i[t].trim();/([\"\'])[^\'\"]+\1/.test(e)||r.includes(e)||(e=`"${e}"`),i[t]=e}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}}),r("lgoP7",function(e,r){t(e.exports,"getCanvasFillStyle",()=>u);var s=i("2MlJ1"),n=i("5lJW7"),a=i("fnmLg"),o=i("jak2I"),l=i("bXmi8"),h=i("2jffg");function u(t,e){if(t.texture===a.Texture.WHITE&&!t.fill)return(0,s.Color).shared.setValue(t.color).toHex();if(t.fill){if(t.fill instanceof h.FillPattern){let i=t.fill,r=e.createPattern(i.texture.source.resource,"repeat"),s=i.transform.copyTo(n.Matrix.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(s),r}if(t.fill instanceof l.FillGradient){let i=t.fill;if("linear"===i.type){let t=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(e=>{t.addColorStop(e.offset,(0,s.Color).shared.setValue(e.color).toHex())}),t}}}else{let i=e.createPattern(t.texture.source.resource,"repeat"),r=t.matrix.copyTo(n.Matrix.shared);return r.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(r),i}return(0,o.warn)("FillStyle not recognised",t),"red"}}),r("bXmi8",function(e,r){t(e.exports,"FillGradient",()=>d);var s=i("2MlJ1"),n=i("fZkkQ"),a=i("5lJW7"),o=i("fyNgJ"),l=i("fnmLg"),h=i("aggPd");let u=class t{constructor(t,e,i,r){this.uid=(0,h.uid)("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=t,this.y0=e,this.x1=i,this.y1=r}addColorStop(t,e){return this.gradientStops.push({offset:t,color:(0,s.Color).shared.setValue(e).toHex()}),this}buildLinearGradient(){let e=t.defaultTextureSize,{gradientStops:i}=this,r=(0,n.DOMAdapter).get().createCanvas();r.width=e,r.height=e;let s=r.getContext("2d"),h=s.createLinearGradient(0,0,t.defaultTextureSize,1);for(let t=0;t<i.length;t++){let e=i[t];h.addColorStop(e.offset,e.color)}s.fillStyle=h,s.fillRect(0,0,e,e),this.texture=new l.Texture({source:new o.ImageSource({resource:r,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:u,y0:d,x1:c,y1:p}=this,f=new a.Matrix,g=c-u,x=p-d;f.translate(-u,-d),f.scale(1/e,1/e),f.rotate(-Math.atan2(x,g)),f.scale(256/Math.sqrt(g*g+x*x),1),this.transform=f}};u.defaultTextureSize=256;let d=u}),r("2jffg",function(e,r){t(e.exports,"FillPattern",()=>o);var s=i("5lJW7"),n=i("aggPd");let a={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class o{constructor(t,e){this.uid=(0,n.uid)("fillPattern"),this.transform=new s.Matrix,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=a[e].addressModeU,t.source.style.addressModeV=a[e].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height)}}}),r("jPARb",function(t,e){var r=i("8gni8"),s=i("lTHkH"),n=i("jQvK8");(0,r.extensions).add(n.BitmapTextPipe,s.loadBitmapFont,s.bitmapFontCachePlugin)}),r("lTHkH",function(e,r){t(e.exports,"bitmapFontCachePlugin",()=>p),t(e.exports,"loadBitmapFont",()=>f);var s=i("gveXO"),n=i("4r1RB"),a=i("fZkkQ"),o=i("8gni8"),l=i("cx7Re"),h=i("gKQeB"),u=i("2dotE"),d=i("1MNrG");let c=[".xml",".fnt"],p={extension:o.ExtensionType.CacheParser,test:t=>t instanceof h.BitmapFont,getCacheableAssets(t,e){let i={};return t.forEach(t=>{i[t]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},f={extension:{type:o.ExtensionType.LoadParser,priority:s.LoaderParserPriority.Normal},test:t=>c.includes((0,l.path).extname(t).toLowerCase()),testParse:async t=>(0,u.bitmapFontTextParser).test(t)||(0,d.bitmapFontXMLStringParser).test(t),async parse(t,e,i){let r=(0,u.bitmapFontTextParser).test(t)?(0,u.bitmapFontTextParser).parse(t):(0,d.bitmapFontXMLStringParser).parse(t),{src:s}=e,{pages:a}=r,o=[];for(let t=0;t<a.length;++t){let e=a[t].file,i=(0,l.path).join((0,l.path).dirname(s),e);i=(0,n.copySearchParams)(i,s),o.push(i)}let c=await i.load(o),p=o.map(t=>c[t]);return new h.BitmapFont({data:r,textures:p},s)},async load(t,e){let i=await (0,a.DOMAdapter).get().fetch(t);return await i.text()},unload(t){t.destroy()}}}),r("gKQeB",function(e,r){t(e.exports,"BitmapFont",()=>l);var s=i("ftn2E"),n=i("fnmLg"),a=i("ixbLl"),o=i("gv7Z5");class l extends a.AbstractBitmapFont{constructor(t,e){super();let{textures:i,data:r}=t;Object.keys(r.pages).forEach(t=>{let e=i[r.pages[parseInt(t,10)].id];this.pages.push({texture:e})}),Object.keys(r.chars).forEach(t=>{let e=r.chars[t],a=i[e.page].source,o=new s.Rectangle(e.x,e.y,e.width,e.height),l=new n.Texture({source:a,frame:o});this.chars[t]={id:t.codePointAt(0),xOffset:e.xOffset,yOffset:e.yOffset,xAdvance:e.xAdvance,kerning:e.kerning??{},texture:l}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){(0,o.BitmapFontManager).install(t)}static uninstall(t){(0,o.BitmapFontManager).uninstall(t)}}}),r("ixbLl",function(r,s){t(r.exports,"AbstractBitmapFont",()=>o);var n=i("03hcD"),a=i("46Rd0");class o extends e(n){constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return(0,a.deprecation)(a.v8_0_0,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return(0,a.deprecation)(a.v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return(0,a.deprecation)(a.v8_0_0,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return(0,a.deprecation)(a.v8_0_0,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return(0,a.deprecation)(a.v8_0_0,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(){for(let t in this.emit("destroy",this),this.removeAllListeners(),this.chars)this.chars[t].texture.destroy();this.chars=null}}}),r("gv7Z5",function(e,r){t(e.exports,"BitmapFontManager",()=>u);var s=i("dIzh1"),n=i("46Rd0"),a=i("eQBwI"),o=i("27bdu"),l=i("dmpIg"),h=i("1sPti");let u=new class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){let i=`${e.fontFamily}-bitmap`,r=!0;if(e._fill.fill&&(i+=e._fill.fill.uid,r=!1),!(0,s.Cache).has(i)){let t=new o.DynamicBitmapFont({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});t.once("destroy",()=>(0,s.Cache).remove(i)),(0,s.Cache).set(i,t)}let n=(0,s.Cache).get(i);return n.ensureCharacters?.(t),n}getLayout(t,e){let i=this.getFont(t,e);return(0,l.getBitmapTextLayout)(t.split(""),e,i)}measureText(t,e){return this.getLayout(t,e)}install(...t){let e=t[0];"string"==typeof e&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},(0,n.deprecation)(n.v8_0_0,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let i=e?.name;if(!i)throw Error("[BitmapFontManager] Property `name` is required.");let r=(e={...this.defaultOptions,...e}).style,l=r instanceof a.TextStyle?r:new a.TextStyle(r),u=null!==l._fill.fill&&void 0!==l._fill.fill,d=new o.DynamicBitmapFont({style:l,overrideFill:u,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),c=(0,h.resolveCharacters)(e.chars);return d.ensureCharacters(c.join("")),(0,s.Cache).set(`${i}-bitmap`,d),d.once("destroy",()=>(0,s.Cache).remove(`${i}-bitmap`)),d}uninstall(t){let e=`${t}-bitmap`,i=(0,s.Cache).get(e);i&&((0,s.Cache).remove(e),i.destroy())}}}),r("eQBwI",function(r,s){t(r.exports,"TextStyle",()=>p);var n=i("03hcD"),a=i("2MlJ1"),o=i("46Rd0"),l=i("bXmi8"),h=i("axvPo"),u=i("eKbEI"),d=i("bXqXf");let c=class t extends e(n){constructor(e={}){super(),function(t){if("boolean"==typeof t.dropShadow&&t.dropShadow){let e=p.defaultDropShadow;t.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness){(0,o.deprecation)(o.v8_0_0,"strokeThickness is now a part of stroke");let e=t.stroke;t.stroke={color:e,width:t.strokeThickness}}if(Array.isArray(t.fill)){(0,o.deprecation)(o.v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e=new l.FillGradient(0,0,0,1.7*t.fontSize),i=t.fill.map(t=>(0,a.Color).shared.setValue(t).toNumber());i.forEach((r,s)=>{let n=t.fillGradientStops[s]??s/i.length;e.addColorStop(n,r)}),t.fill={fill:e}}}(e);let i={...t.defaultTextStyle,...e};for(let t in i)this[t]=i[t];this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){null!==e&&"object"==typeof e?this._dropShadow={...t.defaultDropShadow,...e}:this._dropShadow=e?{...t.defaultDropShadow}:null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){"string"==typeof t?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._fill=(0,u.convertFillInputToFillStyle)(0===t?"black":t,h.GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._stroke=(0,u.convertFillInputToFillStyle)(t,h.GraphicsContext.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,d.generateTextStyleKey)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=t.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){if(this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){let e="boolean"==typeof t?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(e),this._originalFill?.texture&&this._originalFill.texture.destroy(e),this._stroke?.texture&&this._stroke.texture.destroy(e),this._originalStroke?.texture&&this._originalStroke.texture.destroy(e)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}};c.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},c.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let p=c}),r("axvPo",function(r,s){t(r.exports,"GraphicsContext",()=>y);var n=i("03hcD"),a=i("2MlJ1"),o=i("5lJW7"),l=i("6mJyH"),h=i("fnmLg"),u=i("aggPd"),d=i("46Rd0"),c=i("jTAtI"),p=i("5AZFn"),f=i("kacPX"),g=i("eKbEI");let x=new l.Point,m=new o.Matrix,_=class t extends e(n){constructor(){super(...arguments),this.uid=(0,u.uid)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new p.GraphicsPath,this._transform=new o.Matrix,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new c.Bounds,this._boundsDirty=!0}clone(){let e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultStrokeStyle),this}texture(t,e,i,r,s,n){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:r||0,dw:s||t.frame.width,dh:n||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?(0,a.Color).shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new p.GraphicsPath,this}fill(e,i){let r;let s=this.instructions[this.instructions.length-1];return(r=0===this._tick&&s&&"stroke"===s.action?s.data.path:this._activePath.clone())&&(e&&(void 0!==i&&"number"==typeof e&&((0,d.deprecation)(d.v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}_initNextPathLocation(){let{x:t,y:e}=this._activePath.getLastPoint(l.Point.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let i;let r=this.instructions[this.instructions.length-1];return(i=0===this._tick&&r&&"fill"===r.action?r.data.path:this._activePath.clone())&&(e&&(this._strokeStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}cut(){for(let t=0;t<2;t++){let e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}}return this._initNextPathLocation(),this}arc(t,e,i,r,s,n){this._tick++;let a=this._transform;return this._activePath.arc(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,i,r,s,n),this}arcTo(t,e,i,r,s){this._tick++;let n=this._transform;return this._activePath.arcTo(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty,n.a*i+n.c*r+n.tx,n.b*i+n.d*r+n.ty,s),this}arcToSvg(t,e,i,r,s,n,a){this._tick++;let o=this._transform;return this._activePath.arcToSvg(t,e,i,r,s,o.a*n+o.c*a+o.tx,o.b*n+o.d*a+o.ty),this}bezierCurveTo(t,e,i,r,s,n,a){this._tick++;let o=this._transform;return this._activePath.bezierCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,o.a*s+o.c*n+o.tx,o.b*s+o.d*n+o.ty,a),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;let i=this._transform,r=this._activePath.instructions,s=i.a*t+i.c*e+i.tx,n=i.b*t+i.d*e+i.ty;return 1===r.length&&"moveTo"===r[0].action?(r[0].data[0]=s,r[0].data[1]=n):this._activePath.moveTo(s,n),this}quadraticCurveTo(t,e,i,r,s){this._tick++;let n=this._transform;this._activePath.quadraticCurveTo(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty,n.a*i+n.c*r+n.tx,n.b*i+n.d*r+n.ty,s)}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,s){return this._tick++,this._activePath.roundRect(t,e,i,r,s,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,s=0,n){return this._tick++,this._activePath.regularPoly(t,e,i,r,s,n),this}roundPoly(t,e,i,r,s,n){return this._tick++,this._activePath.roundPoly(t,e,i,r,s,n),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,s){return this._tick++,this._activePath.filletRect(t,e,i,r,s),this}chamferRect(t,e,i,r,s,n){return this._tick++,this._activePath.chamferRect(t,e,i,r,s,n),this}star(t,e,i,r,s=0,n=0){return this._tick++,this._activePath.star(t,e,i,r,s,n,this._transform.clone()),this}svg(t){this._tick++,(0,f.SVGParser)(t,this)}restore(){let t=this._stateStack.pop();t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle)}save(){this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}})}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,r,s,n){return t instanceof o.Matrix?this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty):this._transform.set(t,e,i,r,s,n),this}transform(t,e,i,r,s,n){return t instanceof o.Matrix?this._transform.append(t):(m.set(t,e,i,r,s,n),this._transform.append(m)),this}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){let i=this.instructions[e],r=i.action;if("fill"===r){let e=i.data;t.addBounds(e.path.bounds)}else if("texture"===r){let e=i.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===r){let e=i.data,r=e.style.width/2,s=e.path.bounds;t.addFrame(s.minX-r,s.minY-r,s.maxX+r,s.maxY+r)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;let e=this.instructions,i=!1;for(let r=0;r<e.length;r++){let s=e[r],n=s.data,a=n.path;if(!s.action||!a)continue;let o=n.style,l=a.shapePath.shapePrimitives;for(let e=0;e<l.length;e++){let r=l[e].shape;if(!o||!r)continue;let a=l[e].transform,h=a?a.applyInverse(t,x):t;i="fill"===s.action?r.contains(h.x,h.y):r.strokeContains(h.x,h.y,o.width);let u=n.hole;if(u){let t=u.shapePath?.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(h.x,h.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){let e="boolean"==typeof t?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_.defaultFillStyle={color:16777215,alpha:1,texture:h.Texture.WHITE,matrix:null,fill:null},_.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:h.Texture.WHITE,matrix:null,fill:null};let y=_}),r("5AZFn",function(e,r){t(e.exports,"GraphicsPath",()=>h);var s=i("6mJyH"),n=i("aggPd"),a=i("jak2I"),o=i("aw1yD"),l=i("cdcuO");class h{constructor(t){this.instructions=[],this.uid=(0,n.uid)("graphicsPath"),this._dirty=!0,"string"==typeof t?(0,o.SVGToGraphicsPath)(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new l.ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,r,n){let a=this.instructions[this.instructions.length-1],o=this.getLastPoint(s.Point.shared),l=0,h=0;if(a&&"bezierCurveTo"===a.action){l=a.data[2],h=a.data[3];let t=o.x,e=o.y;l=t+(t-l),h=e+(e-h)}else l=o.x,h=o.y;return this.instructions.push({action:"bezierCurveTo",data:[l,h,t,e,i,r,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){let r=this.instructions[this.instructions.length-1],n=this.getLastPoint(s.Point.shared),a=0,o=0;if(r&&"quadraticCurveTo"===r.action){a=r.data[0],o=r.data[1];let t=n.x,e=n.y;a=t+(t-a),o=e+(e-o)}else a=n.x,o=n.y;return this.instructions.push({action:"quadraticCurveTo",data:[a,o,t,e,i]}),this._dirty=!0,this}rect(t,e,i,r,s){return this.instructions.push({action:"rect",data:[t,e,i,r,s]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,s,n,a){s=s||r/2;let o=-1*Math.PI/2+n,l=2*i,h=2*Math.PI/l,u=[];for(let i=0;i<l;i++){let n=i%2?s:r,a=i*h+o;u.push(t+n*Math.cos(a),e+n*Math.sin(a))}return this.poly(u,!0,a),this}clone(t=!1){let e=new h;if(t)for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t];e.instructions.push({action:i.action,data:i.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;let e=t.a,i=t.b,r=t.c,s=t.d,n=t.tx,o=t.ty,l=0,h=0,d=0,c=0,p=0,f=0,g=0,x=0;for(let m=0;m<this.instructions.length;m++){let _=this.instructions[m],y=_.data;switch(_.action){case"moveTo":case"lineTo":l=y[0],h=y[1],y[0]=e*l+r*h+n,y[1]=i*l+s*h+o;break;case"bezierCurveTo":d=y[0],c=y[1],p=y[2],f=y[3],l=y[4],h=y[5],y[0]=e*d+r*c+n,y[1]=i*d+s*c+o,y[2]=e*p+r*f+n,y[3]=i*p+s*f+o,y[4]=e*l+r*h+n,y[5]=i*l+s*h+o;break;case"quadraticCurveTo":d=y[0],c=y[1],l=y[2],h=y[3],y[0]=e*d+r*c+n,y[1]=i*d+s*c+o,y[2]=e*l+r*h+n,y[3]=i*l+s*h+o;break;case"arcToSvg":l=y[5],h=y[6],g=y[0],x=y[1],y[0]=e*g+r*x,y[1]=i*g+s*x,y[5]=e*l+r*h+n,y[6]=i*l+s*h+o;break;case"circle":y[4]=u(y[3],t);break;case"rect":y[4]=u(y[4],t);break;case"ellipse":y[8]=u(y[8],t);break;case"roundRect":y[5]=u(y[5],t);break;case"addPath":y[0].transform(t);break;case"poly":y[2]=u(y[2],t);break;default:(0,a.warn)("unknown transform action",_.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;"closePath"===i.action;){if(--e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}return t}}function u(t,e){return t?t.prepend(e):e.clone()}}),r("aw1yD",function(r,s){t(r.exports,"SVGToGraphicsPath",()=>o);var n=i("kuZKS"),a=i("jak2I");function o(t,i){let r=e(n)(t),s=[],o=null,l=0,h=0;for(let t=0;t<r.length;t++){let e=r[t],n=e[0];switch(n){case"M":l=e[1],h=e[2],i.moveTo(l,h);break;case"m":l+=e[1],h+=e[2],i.moveTo(l,h);break;case"H":l=e[1],i.lineTo(l,h);break;case"h":l+=e[1],i.lineTo(l,h);break;case"V":h=e[1],i.lineTo(l,h);break;case"v":h+=e[1],i.lineTo(l,h);break;case"L":l=e[1],h=e[2],i.lineTo(l,h);break;case"l":l+=e[1],h+=e[2],i.lineTo(l,h);break;case"C":l=e[5],h=e[6],i.bezierCurveTo(e[1],e[2],e[3],e[4],l,h);break;case"c":i.bezierCurveTo(l+e[1],h+e[2],l+e[3],h+e[4],l+e[5],h+e[6]),l+=e[5],h+=e[6];break;case"S":l=e[3],h=e[4],i.bezierCurveToShort(e[1],e[2],l,h);break;case"s":i.bezierCurveToShort(l+e[1],h+e[2],l+e[3],h+e[4]),l+=e[3],h+=e[4];break;case"Q":l=e[3],h=e[4],i.quadraticCurveTo(e[1],e[2],l,h);break;case"q":i.quadraticCurveTo(l+e[1],h+e[2],l+e[3],h+e[4]),l+=e[3],h+=e[4];break;case"T":l=e[1],h=e[2],i.quadraticCurveToShort(l,h);break;case"t":l+=e[1],h+=e[2],i.quadraticCurveToShort(l,h);break;case"A":l=e[6],h=e[7],i.arcToSvg(e[1],e[2],e[3],e[4],e[5],l,h);break;case"a":l+=e[6],h+=e[7],i.arcToSvg(e[1],e[2],e[3],e[4],e[5],l,h);break;case"Z":case"z":i.closePath(),s.length>0&&((o=s.pop())?(l=o.startX,h=o.startY):(l=0,h=0)),o=null;break;default:(0,a.warn)(`Unknown SVG path command: ${n}`)}"Z"!==n&&"z"!==n&&null===o&&(o={startX:l,startY:h},s.push(o))}return i}}),r("kuZKS",function(t,e){t.exports=function(t){var e=[];return t.replace(r,function(t,r,n){var a,o=r.toLowerCase();for(n=(a=n.match(s))?a.map(Number):[],"m"==o&&n.length>2&&(e.push([r].concat(n.splice(0,2))),o="l",r="m"==r?"l":"L");;){if(n.length==i[o])return n.unshift(r),e.push(n);if(n.length<i[o])throw Error("malformed path data");e.push([r].concat(n.splice(0,i[o])))}}),e};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig,s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig}),r("cdcuO",function(e,r){t(e.exports,"ShapePath",()=>m);var s=i("lphlA"),n=i("90tjI"),a=i("g7aft"),o=i("ftn2E"),l=i("59IM4"),h=i("jTAtI"),u=i("kXvt5"),d=i("1Hg1v"),c=i("3EMd7"),p=i("evv0v"),f=i("bWP9A"),g=i("eyY0G");let x=new o.Rectangle;class m{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new h.Bounds,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==t||s!==e)&&i.push(t,e),this}arc(t,e,i,r,s,n){this._ensurePoly(!1);let a=this._currentPoly.points;return(0,c.buildArc)(a,t,e,i,r,s,n),this}arcTo(t,e,i,r,s){this._ensurePoly();let n=this._currentPoly.points;return(0,p.buildArcTo)(n,t,e,i,r,s),this}arcToSvg(t,e,i,r,s,n,a){let o=this._currentPoly.points;return(0,f.buildArcToSvg)(o,this._currentPoly.lastX,this._currentPoly.lastY,n,a,t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,n,a){this._ensurePoly();let o=this._currentPoly;return(0,u.buildAdaptiveBezier)(this._currentPoly.points,o.lastX,o.lastY,t,e,i,r,s,n,a),this}quadraticCurveTo(t,e,i,r,s){this._ensurePoly();let n=this._currentPoly;return(0,d.buildAdaptiveQuadratic)(this._currentPoly.points,n.lastX,n.lastY,t,e,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,s){return this.drawShape(new o.Rectangle(t,e,i,r),s),this}circle(t,e,i,r){return this.drawShape(new s.Circle(t,e,i),r),this}poly(t,e,i){let r=new a.Polygon(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,s=0,n){let a=-1*Math.PI/2+s,o=2*Math.PI/(r=Math.max(0|r,3)),l=[];for(let s=0;s<r;s++){let r=s*o+a;l.push(t+i*Math.cos(r),e+i*Math.sin(r))}return this.poly(l,!0,n),this}roundPoly(t,e,i,r,s,n=0,a){if(r=Math.max(0|r,3),s<=0)return this.regularPoly(t,e,i,r,n);s=Math.min(s,i*Math.sin(Math.PI/r)-.001);let o=-1*Math.PI/2+n,l=2*Math.PI/r,h=(r-2)*Math.PI/r/2;for(let n=0;n<r;n++){let r=n*l+o,u=t+i*Math.cos(r),d=e+i*Math.sin(r),c=r+Math.PI+h,p=r-Math.PI-h,f=u+s*Math.cos(c),g=d+s*Math.sin(c),x=u+s*Math.cos(p),m=d+s*Math.sin(p);0===n?this.moveTo(f,g):this.lineTo(f,g),this.quadraticCurveTo(u,d,x,m,a)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?(0,g.roundedShapeQuadraticCurve)(this,t,e,r):(0,g.roundedShapeArc)(this,t,e),this.closePath())}filletRect(t,e,i,r,s){if(0===s)return this.rect(t,e,i,r);let n=Math.min(i,r)/2,a=Math.min(n,Math.max(-n,s)),o=t+i,l=e+r,h=a<0?-a:0,u=Math.abs(a);return this.moveTo(t,e+u).arcTo(t+h,e+h,t+u,e,u).lineTo(o-u,e).arcTo(o-h,e+h,o,e+u,u).lineTo(o,l-u).arcTo(o-h,l-h,t+i-u,l,u).lineTo(t+u,l).arcTo(t+h,l-h,t,l-u,u).closePath()}chamferRect(t,e,i,r,s,n){if(s<=0)return this.rect(t,e,i,r);let a=Math.min(s,Math.min(i,r)/2),o=t+i,l=e+r,h=[t+a,e,o-a,e,o,e+a,o,l-a,o-a,l,t+a,l,t,l-a,t,e+a];for(let t=h.length-1;t>=2;t-=2)h[t]===h[t-2]&&h[t-1]===h[t-3]&&h.splice(t-1,2);return this.poly(h,!0,n)}ellipse(t,e,i,r,s){return this.drawShape(new n.Ellipse(t,e,i,r),s),this}roundRect(t,e,i,r,s,n){return this.drawShape(new l.RoundedRectangle(t,e,i,r,s),n),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),(i=new a.Polygon).points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new a.Polygon,t)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,i=t.shape.y;if(!t.transform.isIdentity()){let r=t.transform,s=e;e=r.a*e+r.c*i+r.tx,i=r.b*s+r.d*i+r.ty}this._currentPoly.points.push(e,i)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let i=0;i<e.length;i++){let r=e[i],s=r.shape.getBounds(x);r.transform?t.addRect(s,r.transform):t.addRect(s)}return t}}}),r("lphlA",function(e,r){t(e.exports,"Circle",()=>n);var s=i("ftn2E");class n{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new n(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;let i=this.radius*this.radius,r=this.x-t,s=this.y-e;return r*=r,s*=s,r+s<=i}strokeContains(t,e,i){if(0===this.radius)return!1;let r=this.x-t,s=this.y-e,n=this.radius,a=i/2,o=Math.sqrt(r*r+s*s);return o<n+a&&o>n-a}getBounds(t){return(t=t||new s.Rectangle).x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}}),r("90tjI",function(e,r){t(e.exports,"Ellipse",()=>n);var s=i("ftn2E");class n{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new n(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i){let{halfWidth:r,halfHeight:s}=this;if(r<=0||s<=0)return!1;let n=i/2,a=r-n,o=s-n,l=r+n,h=s+n,u=t-this.x,d=e-this.y;return u*u/(a*a)+d*d/(o*o)>1&&u*u/(l*l)+d*d/(h*h)<=1}getBounds(){return new s.Rectangle(this.x-this.halfWidth,this.y-this.halfHeight,2*this.halfWidth,2*this.halfHeight)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}}),r("g7aft",function(e,r){t(e.exports,"Polygon",()=>a);var s=i("2Gdsk"),n=i("ftn2E");class a{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){let t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i].x,e[i].y);e=t}this.points=e,this.closePath=!0}clone(){let t=new a(this.points.slice());return t.closePath=this.closePath,t}contains(t,e){let i=!1,r=this.points.length/2;for(let s=0,n=r-1;s<r;n=s++){let r=this.points[2*s],a=this.points[2*s+1],o=this.points[2*n],l=this.points[2*n+1];a>e!=l>e&&t<(e-a)/(l-a)*(o-r)+r&&(i=!i)}return i}strokeContains(t,e,i){let r=i/2,n=r*r,{points:a}=this;for(let i=0;i<a.length;i+=2){let r=a[i],o=a[i+1],l=a[(i+2)%a.length],h=a[(i+3)%a.length];if((0,s.squaredDistanceToLineSegment)(t,e,r,o,l,h)<=n)return!0}return!1}getBounds(t){t=t||new n.Rectangle;let e=this.points,i=1/0,r=-1/0,s=1/0,a=-1/0;for(let t=0,n=e.length;t<n;t+=2){let n=e[t],o=e[t+1];i=n<i?n:i,r=n>r?n:r,s=o<s?o:s,a=o>a?o:a}return t.x=i,t.width=r-i,t.y=s,t.height=a-s,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}}),r("2Gdsk",function(e,i){t(e.exports,"squaredDistanceToLineSegment",()=>r);function r(t,e,i,r,s,n){let a,o;let l=s-i,h=n-r,u=l*l+h*h,d=-1;0!==u&&(d=((t-i)*l+(e-r)*h)/u),d<0?(a=i,o=r):d>1?(a=s,o=n):(a=i+d*l,o=r+d*h);let c=t-a,p=e-o;return c*c+p*p}}),r("59IM4",function(e,r){t(e.exports,"RoundedRectangle",()=>a);var s=i("ftn2E");let n=(t,e,i,r,s,n)=>{let a=t-i,o=e-r,l=Math.sqrt(a*a+o*o);return l>=s-n&&l<=s+n};class a{constructor(t=0,e=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s}getBounds(t){return(t=t||new s.Rectangle).x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new a(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),s=e-(this.y+i),n=i*i;if(r*r+s*s<=n||(r=t-(this.x+this.width-i))*r+s*s<=n||r*r+(s=e-(this.y+this.height-i))*s<=n||(r=t-(this.x+i))*r+s*s<=n)return!0}return!1}strokeContains(t,e,i){let{x:r,y:s,width:a,height:o,radius:l}=this,h=i/2,u=r+l,d=s+l,c=a-2*l,p=o-2*l,f=r+a,g=s+o;return(t>=r-h&&t<=r+h||t>=f-h&&t<=f+h)&&e>=d&&e<=d+p||(e>=s-h&&e<=s+h||e>=g-h&&e<=g+h)&&t>=u&&t<=u+c||t<u&&e<d&&n(t,e,u,d,l,h)||t>f-l&&e<d&&n(t,e,f-l,d,l,h)||t>f-l&&e>g-l&&n(t,e,f-l,g-l,l,h)||t<u&&e>g-l&&n(t,e,u,g-l,l,h)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}}),r("kXvt5",function(e,r){t(e.exports,"buildAdaptiveBezier",()=>n);var s=i("2zwxK");function n(t,e,i,r,n,a,o,l,h,u){let d=(1-Math.min(.99,Math.max(0,u??s.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1;return function t(e,i,r,s,n,a,o,l,h,u,d){if(d>8)return;let c=(e+r)/2,p=(i+s)/2,f=(r+n)/2,g=(s+a)/2,x=(n+o)/2,m=(a+l)/2,_=(c+f)/2,y=(p+g)/2,b=(f+x)/2,S=(g+m)/2,T=(_+b)/2,v=(y+S)/2;if(d>0){let t=o-e,d=l-i,c=Math.abs((r-o)*d-(s-l)*t),p=Math.abs((n-o)*d-(a-l)*t);if(c>11920929e-14&&p>11920929e-14){if((c+p)*(c+p)<=u*(t*t+d*d)){h.push(T,v);return}}else if(c>11920929e-14){if(c*c<=u*(t*t+d*d)){h.push(T,v);return}}else if(p>11920929e-14){if(p*p<=u*(t*t+d*d)){h.push(T,v);return}}else if((t=T-(e+o)/2)*t+(d=v-(i+l)/2)*d<=u){h.push(T,v);return}}t(e,i,c,p,_,y,T,v,h,u,d+1),t(T,v,b,S,x,m,o,l,h,u,d+1)}(e,i,r,n,a,o,l,h,t,d*=d,0),t.push(l,h),t}}),r("1Hg1v",function(e,r){t(e.exports,"buildAdaptiveQuadratic",()=>n);var s=i("2zwxK");function n(t,e,i,r,n,a,o,l){let h=(1-Math.min(.99,Math.max(0,l??s.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1;return function t(e,i,r,s,n,a,o,l,h){if(h>8)return;let u=(i+s)/2,d=(r+n)/2,c=(s+a)/2,p=(n+o)/2,f=(u+c)/2,g=(d+p)/2,x=a-i,m=o-r,_=Math.abs((s-a)*m-(n-o)*x);if(_>11920929e-14){if(_*_<=l*(x*x+m*m)){e.push(f,g);return}}else if((x=f-(i+a)/2)*x+(m=g-(r+o)/2)*m<=l){e.push(f,g);return}t(e,i,r,u,d,f,g,l,h+1),t(e,f,g,c,p,a,o,l,h+1)}(t,e,i,r,n,a,o,h*=h,0),t.push(a,o),t}}),r("3EMd7",function(e,i){t(e.exports,"buildArc",()=>r);function r(t,e,i,r,s,n,a,o){let l=Math.abs(s-n);!a&&s>n?l=2*Math.PI-l:a&&n>s&&(l=2*Math.PI-l),o=Math.max(o=o||Math.max(6,Math.floor(6*Math.pow(r,1/3)*(l/Math.PI))),3);let h=l/o,u=s;h*=a?-1:1;for(let s=0;s<o+1;s++){let s=e+Math.cos(u)*r,n=i+Math.sin(u)*r;t.push(s,n),u+=h}}}),r("evv0v",function(e,r){t(e.exports,"buildArcTo",()=>n);var s=i("3EMd7");function n(t,e,i,r,n,a){let o=t[t.length-2],l=t[t.length-1]-i,h=o-e,u=n-i,d=r-e,c=Math.abs(l*d-h*u);if(c<1e-8||0===a){(t[t.length-2]!==e||t[t.length-1]!==i)&&t.push(e,i);return}let p=l*l+h*h,f=u*u+d*d,g=l*u+h*d,x=a*Math.sqrt(p)/c,m=a*Math.sqrt(f)/c,_=x*g/p,y=m*g/f,b=x*d+m*h,S=x*u+m*l;(0,s.buildArc)(t,b+e,S+i,a,Math.atan2(l*(m+_)-S,h*(m+_)-b),Math.atan2(u*(x+y)-S,d*(x+y)-b),h*u>d*l)}}),r("bWP9A",function(e,r){t(e.exports,"buildArcToSvg",()=>u);var s=i("kXvt5");let n=2*Math.PI,a={centerX:0,centerY:0,ang1:0,ang2:0},o=({x:t,y:e},i,r,s,n,a,o,l)=>{let h=s*(t*=i)-n*(e*=r),u=n*t+s*e;return l.x=h+a,l.y=u+o,l},l=(t,e,i,r)=>{let s=t*i+e*r;return s>1&&(s=1),s<-1&&(s=-1),(t*r-e*i<0?-1:1)*Math.acos(s)},h=(t,e,i,r,s,a,o,h,u,d,c,p,f)=>{let g=Math.pow(s,2),x=Math.pow(a,2),m=Math.pow(c,2),_=Math.pow(p,2),y=g*x-g*_-x*m;y<0&&(y=0),y/=g*_+x*m;let b=(y=Math.sqrt(y)*(o===h?-1:1))*s/a*p,S=-(y*a)/s*c,T=(c-b)/s,v=(p-S)/a,P=l(1,0,T,v),w=l(T,v,(-c-b)/s,(-p-S)/a);0===h&&w>0&&(w-=n),1===h&&w<0&&(w+=n),f.centerX=d*b-u*S+(t+i)/2,f.centerY=u*b+d*S+(e+r)/2,f.ang1=P,f.ang2=w};function u(t,e,i,r,l,u,d,c=0,p=0,f=0){if(0===u||0===d)return;let g=Math.sin(c*n/360),x=Math.cos(c*n/360),m=x*(e-r)/2+g*(i-l)/2,_=-g*(e-r)/2+x*(i-l)/2;if(0===m&&0===_)return;let y=Math.pow(m,2)/Math.pow(u=Math.abs(u),2)+Math.pow(_,2)/Math.pow(d=Math.abs(d),2);y>1&&(u*=Math.sqrt(y),d*=Math.sqrt(y)),h(e,i,r,l,u,d,p,f,g,x,m,_,a);let{ang1:b,ang2:S}=a,{centerX:T,centerY:v}=a,P=Math.abs(S)/(n/4);1e-7>Math.abs(1-P)&&(P=1);let w=Math.max(Math.ceil(P),1);S/=w;let C=t[t.length-2],M=t[t.length-1],k={x:0,y:0};for(let e=0;e<w;e++){let e=function(t,e){let i=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),r=Math.cos(t),s=Math.sin(t),n=Math.cos(t+e),a=Math.sin(t+e);return[{x:r-s*i,y:s+r*i},{x:n+a*i,y:a-n*i},{x:n,y:a}]}(b,S),{x:i,y:r}=o(e[0],u,d,x,g,T,v,k),{x:n,y:a}=o(e[1],u,d,x,g,T,v,k),{x:l,y:h}=o(e[2],u,d,x,g,T,v,k);(0,s.buildAdaptiveBezier)(t,C,M,i,r,n,a,l,h),C=l,M=h,b+=S}}}),r("eyY0G",function(e,i){function r(t,e,i){let r=(t,e)=>{let i=e.x-t.x,r=e.y-t.y,s=Math.sqrt(i*i+r*r);return{len:s,nx:i/s,ny:r/s}},s=(e,i)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)},n=e[e.length-1];for(let a=0;a<e.length;a++){let o;let l=e[a%e.length],h=l.radius??i;if(h<=0){s(a,l),n=l;continue}let u=e[(a+1)%e.length],d=r(l,n),c=r(l,u);if(d.len<1e-4||c.len<1e-4){s(a,l),n=l;continue}let p=Math.asin(d.nx*c.ny-d.ny*c.nx),f=1,g=!1;d.nx*c.nx- -(d.ny*c.ny)<0?p<0?p=Math.PI+p:(p=Math.PI-p,f=-1,g=!0):p>0&&(f=-1,g=!0);let x=p/2,m=Math.abs(Math.cos(x)*h/Math.sin(x));o=m>Math.min(d.len/2,c.len/2)?Math.abs((m=Math.min(d.len/2,c.len/2))*Math.sin(x)/Math.cos(x)):h;let _=l.x+c.nx*m+-c.ny*o*f,y=l.y+c.ny*m+c.nx*o*f,b=Math.atan2(d.ny,d.nx)+Math.PI/2*f,S=Math.atan2(c.ny,c.nx)-Math.PI/2*f;0===a&&t.moveTo(_+Math.cos(b)*o,y+Math.sin(b)*o),t.arc(_,y,o,b,S,g),n=l}}function s(t,e,i,r){let s=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),n=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),a=e.length;for(let o=0;o<a;o++){let l,h;let u=e[(o+1)%a],d=u.radius??i;if(d<=0){0===o?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y);continue}let c=e[o],p=e[(o+2)%a],f=s(c,u);l=f<1e-4?u:n(u,c,Math.min(f/2,d)/f);let g=s(p,u);h=g<1e-4?u:n(u,p,Math.min(g/2,d)/g),0===o?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y),t.quadraticCurveTo(u.x,u.y,h.x,h.y,r)}}t(e.exports,"roundedShapeArc",()=>r),t(e.exports,"roundedShapeQuadraticCurve",()=>s)}),r("kacPX",function(e,r){t(e.exports,"SVGParser",()=>a);var s=i("2MlJ1"),n=i("5AZFn");function a(t,e){if("string"==typeof t){let e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}return function t(e,i,r,a){let l,h,u,d,c,p,f,g,x,m,_,y,b,S,T,v;let P=e.children,{fillStyle:w,strokeStyle:C}=function(t){let e=t.getAttribute("style"),i={},r={},n=!1,a=!1;if(e){let t=e.split(";");for(let e=0;e<t.length;e++){let[o,l]=t[e].split(":");switch(o){case"stroke":"none"!==l&&(i.color=(0,s.Color).shared.setValue(l).toNumber(),a=!0);break;case"stroke-width":i.width=Number(l);break;case"fill":"none"!==l&&(n=!0,r.color=(0,s.Color).shared.setValue(l).toNumber());break;case"fill-opacity":r.alpha=Number(l);break;case"stroke-opacity":i.alpha=Number(l);break;case"opacity":r.alpha=Number(l),i.alpha=Number(l)}}}else{let e=t.getAttribute("stroke");e&&"none"!==e&&(a=!0,i.color=(0,s.Color).shared.setValue(e).toNumber(),i.width=o(t,"stroke-width",1));let l=t.getAttribute("fill");l&&"none"!==l&&(n=!0,r.color=(0,s.Color).shared.setValue(l).toNumber())}return{strokeStyle:a?i:null,fillStyle:n?r:null}}(e);switch(w&&r?r={...r,...w}:w&&(r=w),C&&a?a={...a,...C}:C&&(a=C),i.context.fillStyle=r,i.context.strokeStyle=a,e.nodeName.toLowerCase()){case"path":b=e.getAttribute("d"),S=new n.GraphicsPath(b),i.context.path(S),r&&i.context.fill(),a&&i.context.stroke();break;case"circle":f=o(e,"cx",0),g=o(e,"cy",0),x=o(e,"r",0),i.context.ellipse(f,g,x,x),r&&i.context.fill(),a&&i.context.stroke();break;case"rect":l=o(e,"x",0),h=o(e,"y",0),T=o(e,"width",0),v=o(e,"height",0),m=o(e,"rx",0),_=o(e,"ry",0),m||_?i.context.roundRect(l,h,T,v,m||_):i.context.rect(l,h,T,v),r&&i.context.fill(),a&&i.context.stroke();break;case"ellipse":f=o(e,"cx",0),g=o(e,"cy",0),m=o(e,"rx",0),_=o(e,"ry",0),i.context.beginPath(),i.context.ellipse(f,g,m,_),r&&i.context.fill(),a&&i.context.stroke();break;case"line":u=o(e,"x1",0),d=o(e,"y1",0),c=o(e,"x2",0),p=o(e,"y2",0),i.context.beginPath(),i.context.moveTo(u,d),i.context.lineTo(c,p),a&&i.context.stroke();break;case"polygon":y=e.getAttribute("points").match(/\d+/g).map(t=>parseInt(t,10)),i.context.poly(y,!0),r&&i.context.fill(),a&&i.context.stroke();break;case"polyline":y=e.getAttribute("points").match(/\d+/g).map(t=>parseInt(t,10)),i.context.poly(y,!1),a&&i.context.stroke();break;case"g":case"svg":break;default:console.info(`[SVG parser] <${e.nodeName}> elements unsupported`)}for(let e=0;e<P.length;e++)t(P[e],i,r,a)}(t,{context:e,path:new n.GraphicsPath},null,null),e}function o(t,e,i){let r=t.getAttribute(e);return r?Number(r):i}}),r("eKbEI",function(e,r){t(e.exports,"convertFillInputToFillStyle",()=>h);var s=i("2MlJ1"),n=i("5lJW7"),a=i("fnmLg"),o=i("bXmi8"),l=i("2jffg");function h(t,e){let i,r;if(null==t)return null;if(t?.fill?(r=t.fill,i={...e,...t}):(r=t,i=e),(0,s.Color).isColorLike(r)){let t=(0,s.Color).shared.setValue(r??0);return{...i,color:t.toNumber(),alpha:1===t.alpha?i.alpha:t.alpha,texture:a.Texture.WHITE}}if(r instanceof l.FillPattern){let t=r;return{...i,color:16777215,texture:t.texture,matrix:t.transform,fill:i.fill??null}}if(r instanceof o.FillGradient){let t=r;return t.buildLinearGradient(),{...i,color:16777215,texture:t.texture,matrix:t.transform}}let h={...e,...t};if(h.texture){if(h.texture!==a.Texture.WHITE){let t=h.matrix?.invert()||new n.Matrix;t.scale(1/h.texture.frame.width,1/h.texture.frame.height),h.matrix=t}let t=h.texture.source.style;"clamp-to-edge"===t.addressMode&&(t.addressMode="repeat")}let u=(0,s.Color).shared.setValue(h.color);return h.alpha*=u.alpha,h.color=u.toNumber(),h.matrix=h.matrix?h.matrix.clone():null,h}}),r("bXqXf",function(e,i){t(e.exports,"generateTextStyleKey",()=>s);let r=["_fontFamily","_fontStyle","_fontSize","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides","_trim"];function s(t){var e,i;let s=[],a=0;for(let e=0;e<r.length;e++){let i=r[e];s[a++]=t[i]}return a=n(t._fill,s,a),e=t._stroke,i=a,e&&(i=n(e,s,i),s[i++]=e.width,s[i++]=e.alignment,s[i++]=e.cap,s[i++]=e.join,s[i++]=e.miterLimit),a=i,s.join("-")}function n(t,e,i){return t&&(e[i++]=t.color,e[i++]=t.alpha,e[i++]=t.fill?.uid),i}}),r("27bdu",function(e,r){t(e.exports,"DynamicBitmapFont",()=>g);var s=i("2MlJ1"),n=i("ftn2E"),a=i("04PYF"),o=i("fyNgJ"),l=i("fnmLg"),h=i("46Rd0"),u=i("boNqw"),d=i("fvvf3"),c=i("lgoP7"),p=i("ixbLl"),f=i("1sPti");class g extends p.AbstractBitmapFont{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=4,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let e=t.style.clone();t.overrideFill&&(e._fill.color=16777215,e._fill.alpha=1,e._fill.texture=l.Texture.WHITE,e._fill.fill=null);let i=e.fontSize;e.fontSize=this.baseMeasurementFontSize;let r=(0,d.fontStringFromTextStyle)(e);t.overrideSize?e._stroke&&(e._stroke.width*=this.baseRenderedFontSize/i):e.fontSize=this.baseRenderedFontSize=i,this._style=e,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,this.fontMetrics=(0,u.CanvasTextMetrics).measureFont(r),this.lineHeight=e.lineHeight||this.fontMetrics.fontSize||e.fontSize}ensureCharacters(t){let e;let i=(0,f.resolveCharacters)(t).filter(t=>!this._currentChars.includes(t)).filter((t,e,i)=>i.indexOf(t)===e);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let{canvas:r,context:s}=(e=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex]).canvasAndContext,a=e.texture.source,o=this._style,h=this._currentX,d=this._currentY,c=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*c,g="italic"===o.fontStyle?2:1,x=0,m=!1;for(let t=0;t<i.length;t++){let e=i[t],f=(0,u.CanvasTextMetrics).measureText(e,o,r,!1);f.lineHeight=f.height;let _=g*f.width*c,y=f.height*c,b=_+2*p,S=y+2*p;if(m=!1,"\n"!==e&&"\r"!==e&&"	"!==e&&" "!==e&&(m=!0,x=Math.ceil(Math.max(S,x))),h+b>512&&(h=0,(d+=x)+(x=S)>512)){a.update();let t=this._nextPage();r=t.canvasAndContext.canvas,s=t.canvasAndContext.context,a=t.texture.source,d=0}let T=_/c-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[e]={id:e.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:T,kerning:{}},m){this._drawGlyph(s,f,h+p,d+p,c,o);let t=a.width*c,i=a.height*c,r=new n.Rectangle(h/t*a.width,d/i*a.height,b/t*a.width,S/i*a.height);this.chars[e].texture=new l.Texture({source:a,frame:r}),h+=Math.ceil(b)}}a.update(),this._currentX=h,this._currentY=d,this._skipKerning&&this._applyKerning(i,s)}get pageTextures(){return(0,h.deprecation)(h.v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){let i=this._measureCache;for(let r=0;r<t.length;r++){let s=t[r];for(let t=0;t<this._currentChars.length;t++){let r=this._currentChars[t],n=i[s];n||(n=i[s]=e.measureText(s).width);let a=i[r];a||(a=i[r]=e.measureText(r).width);let o=e.measureText(s+r).width,l=o-(n+a);l&&(this.chars[s].kerning[r]=l),(l=(o=e.measureText(s+r).width)-(n+a))&&(this.chars[r].kerning[s]=l)}}}_nextPage(){this._currentPageIndex++;let t=this.resolution,e=(0,a.CanvasPool).getOptimalCanvasAndContext(512,512,t);this._setupContext(e.context,this._style,t);let i=this.baseRenderedFontSize/this.baseMeasurementFontSize*t,r=new l.Texture({source:new o.ImageSource({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload"})}),s={canvasAndContext:e,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=(0,d.fontStringFromTextStyle)(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;let r=e._stroke,n=r?.width??0;if(r&&(t.lineWidth=n,t.lineJoin=r.join,t.miterLimit=r.miterLimit,t.strokeStyle=(0,c.getCanvasFillStyle)(r,t)),e._fill&&(t.fillStyle=(0,c.getCanvasFillStyle)(e._fill,t)),e.dropShadow){let r=e.dropShadow,n=(0,s.Color).shared.setValue(r.color).toArray(),a=r.blur*i,o=r.distance*i;t.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${r.alpha})`,t.shadowBlur=a,t.shadowOffsetX=Math.cos(r.angle)*o,t.shadowOffsetY=Math.sin(r.angle)*o}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,r,s,n){let a=e.text,o=e.fontProperties,l=n._stroke,h=(l?.width??0)*s,u=i+h/2,d=r-h/2,c=o.descent*s,p=e.lineHeight*s;n.stroke&&h&&t.strokeText(a,u,d+p-c),n._fill&&t.fillText(a,u,d+p-c)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{canvasAndContext:e,texture:i}=this.pages[t];(0,a.CanvasPool).returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}}}),r("1sPti",function(e,i){t(e.exports,"resolveCharacters",()=>r);function r(t){if(""===t)return[];"string"==typeof t&&(t=[t]);let e=[];for(let i=0,r=t.length;i<r;i++){let r=t[i];if(Array.isArray(r)){if(2!==r.length)throw Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(0===r[0].length||0===r[1].length)throw Error("[BitmapFont]: Invalid character delimiter.");let t=r[0].charCodeAt(0),i=r[1].charCodeAt(0);if(i<t)throw Error("[BitmapFont]: Invalid character range.");for(let r=t;r<=i;r++)e.push(String.fromCharCode(r))}else e.push(...Array.from(r))}if(0===e.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return e}}),r("dmpIg",function(e,i){t(e.exports,"getBitmapTextLayout",()=>r);function r(t,e,i){let r={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=i.baseLineOffset;let s=r.lines[0],n=null,a=!0,o={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=t=>{let e=s.width;for(let i=0;i<o.index;i++){let r=t.positions[i];s.chars.push(t.chars[i]),s.charPositions.push(r+e)}s.width+=t.width,a=!1,o.width=0,o.index=0,o.chars.length=0},h=()=>{let t=s.chars.length-1,e=s.chars[t];for(;" "===e;)s.width-=i.chars[e].xAdvance,e=s.chars[--t];r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,r.lines.push(s),r.height+=i.lineHeight},u=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*u,c=e.wordWrapWidth*u;for(let r=0;r<t.length+1;r++){let u;let p=r===t.length;p||(u=t[r]);let f=i.chars[u]||i.chars[" "];if(/(?:\s)/.test(u)||"\r"===u||"\n"===u||p){if(!a&&e.wordWrap&&s.width+o.width-d>c?h():o.start=s.width,l(o),p||s.charPositions.push(0),"\r"===u||"\n"===u)0!==s.width&&h();else if(!p){let t=f.xAdvance+(f.kerning[n]||0)+d;s.width+=t,s.spaceWidth=t,s.spacesIndex.push(s.charPositions.length),s.chars.push(u)}}else{let t=f.kerning[n]||0,e=f.xAdvance+t+d;o.positions[o.index++]=o.width+t,o.chars.push(u),o.width+=e}n=u}return h(),"center"===e.align?function(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width/2-i.width/2;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(r):"right"===e.align?function(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width-i.width;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(r):"justify"===e.align&&function(t){let e=t.width;for(let i=0;i<t.lines.length;i++){let r=t.lines[i],s=0,n=r.spacesIndex[s++],a=0,o=r.spacesIndex.length,l=(e-r.width)/o;for(let t=0;t<r.charPositions.length;t++)t===n&&(n=r.spacesIndex[s++],a+=l),r.charPositions[t]+=a}}(r),r}}),r("2dotE",function(e,i){t(e.exports,"bitmapFontTextParser",()=>r);let r={test:t=>"string"==typeof t&&t.startsWith("info face="),parse(t){let e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let t in e){let r=e[t].match(/^[a-z]+/gm)[0],s=e[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),n={};for(let t in s){let e=s[t].split("="),i=e[0],r=e[1].replace(/"/gm,""),a=parseFloat(r),o=isNaN(a)?r:a;n[i]=o}i[r].push(n)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=i.info,[n]=i.common,[a]=i.distanceField??[];a&&(r.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),r.fontSize=parseInt(s.size,10),r.fontFamily=s.face,r.lineHeight=parseInt(n.lineHeight,10);let o=i.page;for(let t=0;t<o.length;t++)r.pages.push({id:parseInt(o[t].id,10)||0,file:o[t].file});let l={};r.baseLineOffset=r.lineHeight-parseInt(n.base,10);let h=i.char;for(let t=0;t<h.length;t++){let e=h[t],i=parseInt(e.id,10),s=e.letter??e.char??String.fromCharCode(i);"space"===s&&(s=" "),l[i]=s,r.chars[s]={id:i,page:parseInt(e.page,10)||0,x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xOffset:parseInt(e.xoffset,10),yOffset:parseInt(e.yoffset,10),xAdvance:parseInt(e.xadvance,10),kerning:{}}}let u=i.kerning||[];for(let t=0;t<u.length;t++){let e=parseInt(u[t].first,10),i=parseInt(u[t].second,10),s=parseInt(u[t].amount,10);r.chars[l[i]].kerning[l[e]]=s}return r}}}),r("1MNrG",function(e,r){t(e.exports,"bitmapFontXMLStringParser",()=>a);var s=i("fZkkQ"),n=i("1Z9f1");let a={test:t=>!!("string"==typeof t&&t.includes("<font>"))&&(0,n.bitmapFontXMLParser).test((0,s.DOMAdapter).get().parseXML(t)),parse:t=>(0,n.bitmapFontXMLParser).parse((0,s.DOMAdapter).get().parseXML(t))}}),r("1Z9f1",function(e,i){t(e.exports,"bitmapFontXMLParser",()=>r);let r={test:t=>"string"!=typeof t&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face"),parse(t){let e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("distanceField")[0];s&&(e.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});let n=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let t=0;t<n.length;t++)e.pages.push({id:parseInt(n[t].getAttribute("id"),10)||0,file:n[t].getAttribute("file")});let l={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let t=0;t<a.length;t++){let i=a[t],r=parseInt(i.getAttribute("id"),10),s=i.getAttribute("letter")??i.getAttribute("char")??String.fromCharCode(r);"space"===s&&(s=" "),l[r]=s,e.chars[s]={id:r,page:parseInt(i.getAttribute("page"),10)||0,x:parseInt(i.getAttribute("x"),10),y:parseInt(i.getAttribute("y"),10),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10),xOffset:parseInt(i.getAttribute("xoffset"),10),yOffset:parseInt(i.getAttribute("yoffset"),10),xAdvance:parseInt(i.getAttribute("xadvance"),10),kerning:{}}}for(let t=0;t<o.length;t++){let i=parseInt(o[t].getAttribute("first"),10),r=parseInt(o[t].getAttribute("second"),10),s=parseInt(o[t].getAttribute("amount"),10);e.chars[l[r]].kerning[l[i]]=s}return e}}}),r("jQvK8",function(e,r){t(e.exports,"BitmapTextPipe",()=>d);var s=i("dIzh1"),n=i("8gni8"),a=i("gAoGC"),o=i("5Ony5"),l=i("7AQch"),h=i("gv7Z5"),u=i("dmpIg");class d{constructor(t){this._gpuBitmapText={},this._renderer=t}validateRenderable(t){let e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){let i=this._getGpuBitmapText(t);c(t,i),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,i)),this._renderer.renderPipes.graphics.addRenderable(i,e),i.context.customShader&&this._updateDistanceField(t)}destroyRenderable(t){this._destroyRenderableByUid(t.uid)}_destroyRenderableByUid(t){(0,a.BigPool).return(this._gpuBitmapText[t]),this._gpuBitmapText[t]=null}updateRenderable(t){let e=this._getGpuBitmapText(t);c(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){let{context:i}=e,r=(0,h.BitmapFontManager).getFont(t.text,t._style);i.clear(),"none"===r.distanceField.type||i.customShader||(this._sdfShader||(this._sdfShader=new l.SdfShader),i.customShader=this._sdfShader);let s=Array.from(t.text),n=t._style,a=(n._stroke?.width||0)/2;a+=r.baseLineOffset;let o=(0,u.getBitmapTextLayout)(s,n,r),d=0,c=n.padding,p=o.scale;i.translate(-t._anchor._x*o.width-c,-t._anchor._y*(o.height+o.offsetY)-c).scale(p,p);let f=n._fill.color;for(let t=0;t<o.lines.length;t++){let e=o.lines[t];for(let t=0;t<e.charPositions.length;t++){let n=s[d++],o=r.chars[n];o?.texture&&i.texture(o.texture,f,Math.round(e.charPositions[t]+o.xOffset),Math.round(a+o.yOffset))}a+=r.lineHeight}}_getGpuBitmapText(t){return this._gpuBitmapText[t.uid]||this.initGpuText(t)}initGpuText(t){let e=(0,a.BigPool).get(o.Graphics);return this._gpuBitmapText[t.uid]=e,this._updateContext(t,e),t.on("destroyed",()=>{this.destroyRenderable(t)}),this._gpuBitmapText[t.uid]}_updateDistanceField(t){let e=this._getGpuBitmapText(t).context,i=t._style.fontFamily,r=(0,s.Cache).get(`${i}-bitmap`),{a:n,b:a,c:o,d:l}=t.groupTransform,h=r.baseRenderedFontSize/t._style.fontSize,u=t.resolution??this._renderer.resolution,d=(Math.abs(Math.sqrt(n*n+a*a))+Math.abs(Math.sqrt(o*o+l*l)))/2*r.distanceField.range*(1/h)*u;e.customShader.resources.localUniforms.uniforms.uDistance=d}destroy(){for(let t in this._gpuBitmapText)this._destroyRenderableByUid(t);this._gpuBitmapText=null,this._sdfShader?.destroy(!0),this._sdfShader=null,this._renderer=null}}function c(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}d.extension={type:[n.ExtensionType.WebGLPipes,n.ExtensionType.WebGPUPipes,n.ExtensionType.CanvasPipes],name:"bitmapText"}}),r("5Ony5",function(e,r){t(e.exports,"Graphics",()=>o);var s=i("46Rd0"),n=i("haDu9"),a=i("axvPo");class o extends n.Container{constructor(t){t instanceof a.GraphicsContext&&(t={context:t});let{context:e,roundPixels:i,...r}=t||{};super({label:"Graphics",...r}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,e?this._context=e:this._context=this._ownedContext=new a.GraphicsContext,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}onViewUpdate(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(!0===t||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(...t){return this._callContextMethod("cut",t)}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(...t){return this._callContextMethod("closePath",t)}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(...t){return this._callContextMethod("save",t)}getTransform(...t){return this._callContextMethod("getTransform",t)}resetTransform(...t){return this._callContextMethod("resetTransform",t)}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(...t){return this._callContextMethod("clear",t)}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new o(this._context.clone()):(this._ownedContext=null,new o(this._context))}lineStyle(t,e,i){(0,s.deprecation)(s.v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let r={};return t&&(r.width=t),e&&(r.color=e),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(t,e){(0,s.deprecation)(s.v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){(0,s.deprecation)(s.v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let t=this.context.strokeStyle;return(t.width!==a.GraphicsContext.defaultStrokeStyle.width||t.color!==a.GraphicsContext.defaultStrokeStyle.color||t.alpha!==a.GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}}),r("7AQch",function(e,r){t(e.exports,"SdfShader",()=>g);var s=i("5lJW7"),n=i("eLF74"),a=i("6hK4C"),o=i("hOce1"),l=i("2pHo3"),h=i("g2wNI"),u=i("b6jSB"),d=i("a3LAq"),c=i("1p972"),p=i("5Or1P"),f=i("dlwHe");class g extends d.Shader{constructor(){super({glProgram:(0,a.compileHighShaderGlProgram)({name:"sdf-shader",bits:[o.colorBitGl,(0,l.generateTextureBatchBitGl)(n.MAX_TEXTURES),p.localUniformMSDFBitGl,f.mSDFBitGl,h.roundPixelsBitGl]}),gpuProgram:(0,a.compileHighShaderGpuProgram)({name:"sdf-shader",bits:[o.colorBit,(0,l.generateTextureBatchBit)(n.MAX_TEXTURES),p.localUniformMSDFBit,f.mSDFBit,h.roundPixelsBit]}),resources:{localUniforms:new c.UniformGroup({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new s.Matrix,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),batchSamplers:u.batchSamplersUniformGroup}})}}}),r("5Or1P",function(e,i){t(e.exports,"localUniformMSDFBit",()=>r),t(e.exports,"localUniformMSDFBitGl",()=>s);let r={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vColor * calculateMSDFAlpha(outColor, localUniforms.uDistance);
        `}},s={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vColor * calculateMSDFAlpha(outColor, uDistance);
        `}}}),r("dlwHe",function(e,i){t(e.exports,"mSDFBit",()=>r),t(e.exports,"mSDFBitGl",()=>s);let r={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                return alpha;
            }
        `}},s={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                return alpha;
            }
        `}}}),r("hgU2d",function(t,e){var r=i("8gni8"),s=i("dj5OL"),n=i("dp9uV");(0,r.extensions).add(n.HTMLTextSystem),(0,r.extensions).add(s.HTMLTextPipe)}),r("dj5OL",function(e,r){t(e.exports,"HTMLTextPipe",()=>h);var s=i("8gni8"),n=i("fnmLg"),a=i("2dWUE"),o=i("gAoGC"),l=i("e4dtB");class h{constructor(t){this._gpuText=Object.create(null),this._renderer=t}validateRenderable(t){let e=this._getGpuText(t),i=t._getKey();return e.textureNeedsUploading?(e.textureNeedsUploading=!1,!0):e.currentKey!==i}addRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(e)}updateRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e.batcher.updateElement(e)}destroyRenderable(t){this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.htmlText.decreaseReferenceCount(e.currentKey),(0,o.BigPool).return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),i=this._getGpuText(t),r=i.batchableSprite;i.currentKey!==e&&this._updateGpuText(t).catch(t=>{console.error(t)}),t._didTextUpdate=!1;let s=t._style.padding;(0,a.updateQuadBounds)(r.bounds,t._anchor,r.texture,s)}async _updateGpuText(t){t._didTextUpdate=!1;let e=this._getGpuText(t);if(e.generatingTexture)return;let i=t._getKey();this._renderer.htmlText.decreaseReferenceCount(e.currentKey),e.generatingTexture=!0,e.currentKey=i;let r=t.resolution??this._renderer.resolution,s=await this._renderer.htmlText.getManagedTexture(t.text,r,t._style,t._getKey()),n=e.batchableSprite;n.texture=e.texture=s,e.generatingTexture=!1,e.textureNeedsUploading=!0,t._onUpdate();let o=t._style.padding;(0,a.updateQuadBounds)(n.bounds,t._anchor,n.texture,o)}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:n.Texture.EMPTY,currentKey:"--",batchableSprite:(0,o.BigPool).get(l.BatchableSprite),textureNeedsUploading:!1,generatingTexture:!1},i=e.batchableSprite;return i.renderable=t,i.texture=n.Texture.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,t.on("destroyed",()=>{this.destroyRenderable(t)}),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}}h.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"htmlText"}}),r("dp9uV",function(e,r){t(e.exports,"FontStylePromiseCache",()=>y),t(e.exports,"HTMLTextRenderData",()=>b),t(e.exports,"HTMLTextSystem",()=>S);var s=i("8gni8"),n=i("2S2W1"),a=i("jYmNI"),o=i("gFOMb"),l=i("jak2I"),h=i("gAoGC"),u=i("5JkHu"),d=i("3RuD1"),c=i("hz6oB"),p=i("eB9UK"),f=i("lYnUe"),g=i("g8G6u"),x=i("fD0aF");let m="http://www.w3.org/2000/svg",_="http://www.w3.org/1999/xhtml",y=new Map;class b{constructor(){this.svgRoot=document.createElementNS(m,"svg"),this.foreignObject=document.createElementNS(m,"foreignObject"),this.domElement=document.createElementNS(_,"div"),this.styleElement=document.createElementNS(_,"style"),this.image=new Image;let{foreignObject:t,svgRoot:e,styleElement:i,domElement:r}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(r)}}class S{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===a.RendererType.WEBGPU}getTexture(t){return this._buildTexturePromise(t.text,t.resolution,t.style)}getManagedTexture(t,e,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].promise;let s=this._buildTexturePromise(t,e,i).then(t=>(this._activeTextures[r].texture=t,t));return this._activeTextures[r]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(t,e,i){let r=(0,h.BigPool).get(b),s=(0,d.extractFontFamilies)(t,i),n=await (0,c.getFontCss)(s,i),a=(0,x.measureHtmlText)(t,i,n,r),l=Math.ceil(Math.ceil(Math.max(1,a.width)+2*i.padding)*e),m=Math.ceil(Math.ceil(Math.max(1,a.height)+2*i.padding)*e),_=r.image;_.width=0|l,_.height=0|m;let y=(0,p.getSVGUrl)(t,i,e,n,r);await (0,g.loadSVGImage)(_,y,(0,o.isSafari)()&&s.length>0);let S=_;this._createCanvas&&(S=(0,f.getTemporaryCanvasFromImage)(_,e));let T=(0,u.getPo2TextureFromSource)(S,_.width,_.height,e);return this._createCanvas&&this._renderer.texture.initSource(T.source),(0,h.BigPool).return(r),T}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];e&&(e.usageCount--,0===e.usageCount&&(e.texture?this._cleanUp(e):e.promise.then(t=>{e.texture=t,this._cleanUp(e)}).catch(()=>{(0,l.warn)("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[t]=null))}_cleanUp(t){(0,n.TexturePool).returnTexture(t.texture),t.texture.source.resource=null,t.texture.source.uploadMethodId="unknown"}getReferenceCount(t){return this._activeTextures[t].usageCount}destroy(){this._activeTextures=null}}S.extension={type:[s.ExtensionType.WebGLSystem,s.ExtensionType.WebGPUSystem,s.ExtensionType.CanvasSystem],name:"htmlText"},S.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"}}),r("gFOMb",function(e,r){t(e.exports,"isSafari",()=>n);var s=i("fZkkQ");function n(){let{userAgent:t}=(0,s.DOMAdapter).get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}}),r("3RuD1",function(e,i){t(e.exports,"extractFontFamilies",()=>r);function r(t,e){let i=e.fontFamily,r=[],s={},n=t.match(/font-family:([^;"\s]+)/g);function a(t){s[t]||(r.push(t),s[t]=!0)}if(Array.isArray(i))for(let t=0;t<i.length;t++)a(i[t]);else a(i);for(let t in n&&n.forEach(t=>{a(t.split(":")[1].trim())}),e.tagStyles)a(e.tagStyles[t].fontFamily);return r}}),r("hz6oB",function(e,r){t(e.exports,"getFontCss",()=>o);var s=i("dIzh1"),n=i("dp9uV"),a=i("ixSCW");async function o(t,e){let i=t.filter(t=>(0,s.Cache).has(t)).map((t,i)=>{if(!(0,n.FontStylePromiseCache).has(t)){let{url:r}=(0,s.Cache).get(t);0===i?(0,n.FontStylePromiseCache).set(t,(0,a.loadFontCSS)(e,r)):(0,n.FontStylePromiseCache).set(t,(0,a.loadFontCSS)({...n.HTMLTextSystem.defaultFontOptions,fontFamily:t},r))}return(0,n.FontStylePromiseCache).get(t)});return(await Promise.all(i)).join("\n")}}),r("ixSCW",function(e,r){t(e.exports,"loadFontCSS",()=>n);var s=i("iiCcW");async function n(t,e){let i=await (0,s.loadFontAsBase64)(e);return`@font-face {
        font-family: "${t.fontFamily}";
        src: url('${i}');
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
    }`}}),r("iiCcW",function(e,r){t(e.exports,"loadFontAsBase64",()=>n);var s=i("fZkkQ");async function n(t){let e=await (0,s.DOMAdapter).get().fetch(t),i=await e.blob(),r=new FileReader;return await new Promise((t,e)=>{r.onloadend=()=>t(r.result),r.onerror=e,r.readAsDataURL(i)})}}),r("eB9UK",function(e,i){t(e.exports,"getSVGUrl",()=>r);function r(t,e,i,r,s){let{domElement:n,styleElement:a,svgRoot:o}=s;n.innerHTML=`<style>${e.cssStyle}</style><div>${t}</div>`,n.setAttribute("style",`transform: scale(${i});transform-origin: top left; display: inline-block`),a.textContent=r;let{width:l,height:h}=s.image;return o.setAttribute("width",l.toString()),o.setAttribute("height",h.toString()),new XMLSerializer().serializeToString(o)}}),r("lYnUe",function(e,r){t(e.exports,"getTemporaryCanvasFromImage",()=>n);var s=i("04PYF");function n(t,e){let i=(0,s.CanvasPool).getOptimalCanvasAndContext(t.width,t.height,e),{context:r}=i;return r.clearRect(0,0,t.width,t.height),r.drawImage(t,0,0),(0,s.CanvasPool).returnCanvasAndContext(i),i.canvas}}),r("g8G6u",function(e,i){t(e.exports,"loadSVGImage",()=>r);function r(t,e,i){return new Promise(async r=>{i&&await new Promise(t=>setTimeout(t,100)),t.onload=()=>{r()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}}),r("fD0aF",function(e,r){let s;t(e.exports,"measureHtmlText",()=>o);var n=i("boNqw"),a=i("dp9uV");function o(t,e,i,r){let{domElement:o,styleElement:l,svgRoot:h}=r=r||s||(s=new a.HTMLTextRenderData);o.innerHTML=`<style>${e.cssStyle}</style><div>${t}</div>`,o.setAttribute("style","transform-origin: top left; display: inline-block"),i&&(l.textContent=i),document.body.appendChild(h);let u=o.getBoundingClientRect();h.remove();let d=(0,n.CanvasTextMetrics).measureFont(e.fontStyle).descent;return{width:u.width,height:u.height+d}}}),r("5tJIh",function(t,e){var r=i("8gni8"),s=i("7YgNi");(0,r.extensions).add(s.TilingSpritePipe)}),r("7YgNi",function(e,r){t(e.exports,"TilingSpritePipe",()=>g);var s=i("8gni8"),n=i("eeMzm"),a=i("jYmNI"),o=i("lCwdn"),l=i("7mU6o"),h=i("krzxa"),u=i("jQ2gI"),d=i("1Jt3K"),c=i("hJiqx"),p=i("kbofZ");let f=new d.QuadGeometry;class g{constructor(t){this._tilingSpriteDataHash=Object.create(null),this._renderer=t}validateRenderable(t){let e=this._getTilingSpriteData(t),i=e.canBatch;this._updateCanBatch(t);let r=e.canBatch;if(r&&r===i){let{batchableMesh:i}=e;if(i.texture._source!==t.texture._source)return!i.batcher.checkAndUpdateTexture(i,t.texture)}return i!==r}addRenderable(t,e){let i=this._renderer.renderPipes.batch;this._updateCanBatch(t);let r=this._getTilingSpriteData(t),{geometry:s,canBatch:n}=r;if(n){r.batchableMesh||(r.batchableMesh=new l.BatchableMesh);let e=r.batchableMesh;t._didTilingSpriteUpdate&&(t._didTilingSpriteUpdate=!1,this._updateBatchableMesh(t),e.geometry=s,e.mesh=t,e.texture=t._texture),e.roundPixels=this._renderer._roundPixels|t._roundPixels,i.addToBatch(e)}else i.break(e),r.shader||(r.shader=new u.TilingSpriteShader),this.updateRenderable(t),e.add(t)}execute(t){let{shader:e}=this._tilingSpriteDataHash[t.uid];e.groups[0]=this._renderer.globalUniforms.bindGroup;let i=e.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=this._renderer._roundPixels|t._roundPixels,(0,o.color32BitToUniform)(t.groupColorAlpha,i.uColor,0),this._renderer.encoder.draw({geometry:f,shader:e,state:n.State.default2d})}updateRenderable(t){let e=this._getTilingSpriteData(t),{canBatch:i}=e;if(i){let{batchableMesh:i}=e;t._didTilingSpriteUpdate&&this._updateBatchableMesh(t),i.batcher.updateElement(i)}else if(t._didTilingSpriteUpdate){let{shader:i}=e;i.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}t._didTilingSpriteUpdate=!1}destroyRenderable(t){let e=this._getTilingSpriteData(t);e.batchableMesh=null,e.shader?.destroy(),this._tilingSpriteDataHash[t.uid]=null}_getTilingSpriteData(t){return this._tilingSpriteDataHash[t.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){let e=new h.MeshGeometry({indices:f.indices,positions:f.positions.slice(),uvs:f.uvs.slice()});return this._tilingSpriteDataHash[t.uid]={canBatch:!0,renderable:t,geometry:e},t.on("destroyed",()=>{this.destroyRenderable(t)}),this._tilingSpriteDataHash[t.uid]}_updateBatchableMesh(t){let{geometry:e}=this._getTilingSpriteData(t),i=t.texture.source.style;"repeat"!==i.addressMode&&(i.addressMode="repeat",i.update()),(0,p.setUvs)(t,e.uvs),(0,c.setPositions)(t,e.positions)}destroy(){for(let t in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[t].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(t){let e=this._getTilingSpriteData(t),i=t.texture,r=!0;return this._renderer.type===a.RendererType.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=i.textureMatrix.isSimple&&(r||i.source.isPowerOfTwo),e.canBatch}}g.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"tilingSprite"}}),r("krzxa",function(e,r){t(e.exports,"MeshGeometry",()=>h);var s=i("135eB"),n=i("iKCKR"),a=i("2ngBw"),o=i("46Rd0");let l=class t extends a.Geometry{constructor(...e){let i=e[0]??{};i instanceof Float32Array&&((0,o.deprecation)(o.v8_0_0,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:e[1],indices:e[2]});let r=(i={...t.defaultOptions,...i}).positions||new Float32Array([0,0,1,0,1,1,0,1]),a=i.uvs||new Float32Array([0,0,1,0,1,1,0,1]),l=i.indices||new Uint32Array([0,1,2,0,2,3]),h=i.shrinkBuffersToFit;super({attributes:{aPosition:{buffer:new s.Buffer({data:r,label:"attribute-mesh-positions",shrinkToFit:h,usage:n.BufferUsage.VERTEX|n.BufferUsage.COPY_DST}),format:"float32x2",stride:8,offset:0},aUV:{buffer:new s.Buffer({data:a,label:"attribute-mesh-uvs",shrinkToFit:h,usage:n.BufferUsage.VERTEX|n.BufferUsage.COPY_DST}),format:"float32x2",stride:8,offset:0}},indexBuffer:new s.Buffer({data:l,label:"index-mesh-buffer",shrinkToFit:h,usage:n.BufferUsage.INDEX|n.BufferUsage.COPY_DST}),topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};l.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let h=l}),r("jQ2gI",function(e,r){let s,n;t(e.exports,"TilingSpriteShader",()=>f);var a=i("5lJW7"),o=i("6hK4C"),l=i("jiAbK"),h=i("g2wNI"),u=i("a3LAq"),d=i("1p972"),c=i("fnmLg"),p=i("dRwLF");class f extends u.Shader{constructor(){s??(s=(0,o.compileHighShaderGpuProgram)({name:"tiling-sprite-shader",bits:[l.localUniformBit,p.tilingBit,h.roundPixelsBit]})),n??(n=(0,o.compileHighShaderGlProgram)({name:"tiling-sprite-shader",bits:[l.localUniformBitGl,p.tilingBitGl,h.roundPixelsBitGl]})),super({glProgram:n,gpuProgram:s,resources:{localUniforms:new d.UniformGroup({uTransformMatrix:{value:new a.Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:new d.UniformGroup({uMapCoord:{value:new a.Matrix,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new a.Matrix,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}}),uTexture:c.Texture.EMPTY.source,uSampler:c.Texture.EMPTY.source.style}})}updateUniforms(t,e,i,r,s,n){let a=this.resources.tilingUniforms,o=n.width,l=n.height,h=n.textureMatrix,u=a.uniforms.uTextureTransform;u.set(i.a*o/t,i.b*o/e,i.c*l/t,i.d*l/e,i.tx/t,i.ty/e),u.invert(),a.uniforms.uMapCoord=h.mapCoord,a.uniforms.uClampFrame=h.uClampFrame,a.uniforms.uClampOffset=h.uClampOffset,a.uniforms.uTextureTransform=u,a.uniforms.uSizeAnchor[0]=t,a.uniforms.uSizeAnchor[1]=e,a.uniforms.uSizeAnchor[2]=r,a.uniforms.uSizeAnchor[3]=s,n&&(this.resources.uTexture=n.source,this.resources.uSampler=n.source.style)}}}),r("dRwLF",function(e,i){t(e.exports,"tilingBit",()=>r),t(e.exports,"tilingBitGl",()=>s);let r={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            vUV = (tilingUniforms.uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},s={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            vUV = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}}}),r("1Jt3K",function(e,r){t(e.exports,"QuadGeometry",()=>n);var s=i("krzxa");class n extends s.MeshGeometry{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}}),r("hJiqx",function(e,i){t(e.exports,"setPositions",()=>r);function r(t,e){let i=t.anchor.x,r=t.anchor.y;e[0]=-i*t.width,e[1]=-r*t.height,e[2]=(1-i)*t.width,e[3]=-r*t.height,e[4]=(1-i)*t.width,e[5]=(1-r)*t.height,e[6]=-i*t.width,e[7]=(1-r)*t.height}}),r("kbofZ",function(e,r){t(e.exports,"setUvs",()=>a);var s=i("5lJW7"),n=i("8NM7k");function a(t,e){let i=t.texture,r=i.frame.width,a=i.frame.height,o=0,l=0;t._applyAnchorToTexture&&(o=t.anchor.x,l=t.anchor.y),e[0]=e[6]=-o,e[2]=e[4]=1-o,e[1]=e[3]=-l,e[5]=e[7]=1-l;let h=s.Matrix.shared;h.copyFrom(t._tileTransform.matrix),h.tx/=t.width,h.ty/=t.height,h.invert(),h.scale(t.width/r,t.height/a),(0,n.applyMatrix)(e,2,0,h)}}),r("8NM7k",function(e,i){t(e.exports,"applyMatrix",()=>r);function r(t,e,i,r){let s=0,n=t.length/(e||2),a=r.a,o=r.b,l=r.c,h=r.d,u=r.tx,d=r.ty;for(i*=e;s<n;){let r=t[i],n=t[i+1];t[i]=a*r+l*n+u,t[i+1]=o*r+h*n+d,i+=e,s++}}}),r("7Eqdx",function(t,e){var r=i("8gni8"),s=i("6PGJ0");(0,r.extensions).add(s.NineSliceSpritePipe)}),r("6PGJ0",function(e,r){t(e.exports,"NineSliceSpritePipe",()=>l);var s=i("8gni8"),n=i("gAoGC"),a=i("7mU6o"),o=i("6gDnL");class l{constructor(t){this._gpuSpriteHash=Object.create(null),this._renderer=t}addRenderable(t,e){let i=this._getGpuSprite(t);t._didSpriteUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i)}updateRenderable(t){let e=this._gpuSpriteHash[t.uid];t._didSpriteUpdate&&this._updateBatchableSprite(t,e),e.batcher.updateElement(e)}validateRenderable(t){let e=t._texture,i=this._getGpuSprite(t);return i.texture._source!==e._source&&!i.batcher.checkAndUpdateTexture(i,e)}destroyRenderable(t){let e=this._gpuSpriteHash[t.uid];(0,n.BigPool).return(e),this._gpuSpriteHash[t.uid]=null}_updateBatchableSprite(t,e){t._didSpriteUpdate=!1,e.geometry.update(t),e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=new a.BatchableMesh;return e.geometry=new o.NineSliceGeometry,e.mesh=t,e.texture=t._texture,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.on("destroyed",()=>{this.destroyRenderable(t)}),e}destroy(){for(let t in this._gpuSpriteHash)this._gpuSpriteHash[t].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}}l.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"nineSliceSprite"}}),r("6gDnL",function(e,r){t(e.exports,"NineSliceGeometry",()=>o);var s=i("5lJW7"),n=i("6ujPk");let a=class t extends n.PlaneGeometry{constructor(e={}){e={...t.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this._textureMatrix=new s.Matrix,this.update(e)}update(t){this.width=t.width??this.width,this.height=t.height??this.height,this._originalWidth=t.originalWidth??this._originalWidth,this._originalHeight=t.originalHeight??this._originalHeight,this._leftWidth=t.leftWidth??this._leftWidth,this._rightWidth=t.rightWidth??this._rightWidth,this._topHeight=t.topHeight??this._topHeight,this._bottomHeight=t.bottomHeight??this._bottomHeight,t.textureMatrix&&this._textureMatrix.copyFrom(t.textureMatrix),this.updateUvs(),this.updatePositions()}updatePositions(){let t=this.positions,e=this._leftWidth+this._rightWidth,i=this.width>e?1:this.width/e,r=this._topHeight+this._bottomHeight,s=Math.min(i,this.height>r?1:this.height/r);t[9]=t[11]=t[13]=t[15]=this._topHeight*s,t[17]=t[19]=t[21]=t[23]=this.height-this._bottomHeight*s,t[25]=t[27]=t[29]=t[31]=this.height,t[2]=t[10]=t[18]=t[26]=this._leftWidth*s,t[4]=t[12]=t[20]=t[28]=this.width-this._rightWidth*s,t[6]=t[14]=t[22]=t[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let t=this._textureMatrix,e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let i=1/this._originalWidth,r=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,function(t,e,i){i??(i=e);let r=t.a,s=t.b,n=t.c,a=t.d,o=t.tx,l=t.ty;for(let t=0;t<e.length;t+=2){let h=e[t],u=e[t+1];i[t]=h*r+u*n+o,i[t+1]=h*s+u*a+l}}(t,e),this.getBuffer("aUV").update()}};a.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let o=a}),r("6ujPk",function(e,r){t(e.exports,"PlaneGeometry",()=>o);var s=i("46Rd0"),n=i("krzxa");let a=class t extends n.MeshGeometry{constructor(...t){super({});let e=t[0]??{};"number"==typeof e&&((0,s.deprecation)(s.v8_0_0,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),e={width:e,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(e)}build(e){e={...t.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;let i=this.verticesX*this.verticesY,r=[],s=[],n=[],a=this.verticesX-1,o=this.verticesY-1,l=this.width/a,h=this.height/o;for(let t=0;t<i;t++){let e=t%this.verticesX,i=t/this.verticesX|0;r.push(e*l,i*h),s.push(e/a,i/o)}let u=a*o;for(let t=0;t<u;t++){let e=t%a,i=t/a|0,r=i*this.verticesX+e,s=i*this.verticesX+e+1,o=(i+1)*this.verticesX+e,l=(i+1)*this.verticesX+e+1;n.push(r,s,o,s,l,o)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint32Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};a.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let o=a}),r("1xk46",function(t,e){var r=i("8gni8"),s=i("5BWQG"),n=i("fPmYi");(0,r.extensions).add(n.FilterSystem),(0,r.extensions).add(s.FilterPipe)}),r("5BWQG",function(e,r){t(e.exports,"FilterPipe",()=>n);var s=i("8gni8");class n{constructor(t){this._renderer=t}push(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){"pushFilter"===t.action?this._renderer.filter.push(t):"popFilter"===t.action&&this._renderer.filter.pop()}destroy(){this._renderer=null}}n.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"filter"}}),r("fPmYi",function(e,r){t(e.exports,"FilterSystem",()=>_);var s=i("8gni8"),n=i("5lJW7"),a=i("6mJyH"),o=i("9bUUm"),l=i("2ngBw"),h=i("1p972"),u=i("fnmLg"),d=i("2S2W1"),c=i("jYmNI"),p=i("jTAtI"),f=i("12Ia0"),g=i("jDKUc"),x=i("jak2I");let m=new l.Geometry({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),location:0,format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class _{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new h.UniformGroup({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new o.BindGroup({}),this.renderer=t}get activeBackTexture(){return this._activeFilterData?.backTexture}push(t){let e=this.renderer,i=t.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let r=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,0===i.length){r.skip=!0;return}let s=r.bounds;t.renderables?(0,g.getGlobalRenderableBounds)(t.renderables,s):t.filterEffect.filterArea?(s.clear(),s.addRect(t.filterEffect.filterArea),s.applyMatrix(t.container.worldTransform)):(0,f.getFastGlobalBounds)(t.container,s);let n=e.renderTarget.rootRenderTarget.colorTexture.source,a=n._resolution,o=0,l=n.antialias,h=!1,u=!1;for(let t=0;t<i.length;t++){let r=i[t];if(a=Math.min(a,r.resolution),o+=r.padding,"inherit"!==r.antialias&&(l="on"===r.antialias),!(r.compatibleRenderers&e.type)){u=!1;break}if(r.blendRequired&&!(e.backBuffer?.useBackBuffer??!0)){(0,x.warn)("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),u=!1;break}u=r.enabled||u,h=h||r.blendRequired}if(!u||(s.scale(a).fit(e.renderTarget.rootViewPort).scale(1/a).pad(o).ceil(),!s.isPositive)){r.skip=!0;return}r.skip=!1,r.bounds=s,r.blendRequired=h,r.container=t.container,r.filterEffect=t.filterEffect,r.previousRenderSurface=e.renderTarget.renderSurface,r.inputTexture=(0,d.TexturePool).getOptimalTexture(s.width,s.height,a,l),e.renderTarget.bind(r.inputTexture,!0),e.globalUniforms.push({offset:s})}pop(){let t=this.renderer;this._filterStackIndex--;let e=this._filterStack[this._filterStackIndex];if(e.skip)return;this._activeFilterData=e;let i=e.inputTexture,r=e.bounds,s=u.Texture.EMPTY;if(t.renderTarget.finishRenderPass(),e.blendRequired){let i=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,n=t.renderTarget.getRenderTarget(e.previousRenderSurface);s=this.getBackTexture(n,r,i)}e.backTexture=s;let n=e.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),t.globalUniforms.pop(),1===n.length)n[0].apply(this,i,e.previousRenderSurface,!1),(0,d.TexturePool).returnTexture(i);else{let t=e.inputTexture,i=(0,d.TexturePool).getOptimalTexture(r.width,r.height,t.source._resolution,!1),s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,t,i,!0);let e=t;t=i,i=e}n[s].apply(this,t,e.previousRenderSurface,!1),(0,d.TexturePool).returnTexture(t),(0,d.TexturePool).returnTexture(i)}e.blendRequired&&(0,d.TexturePool).returnTexture(s)}getBackTexture(t,e,i){let r=t.colorTexture.source._resolution,s=(0,d.TexturePool).getOptimalTexture(e.width,e.height,r,!1),n=e.minX,a=e.minY;i&&(n-=i.minX,a-=i.minY),n=Math.floor(n*r),a=Math.floor(a*r);let o=Math.ceil(e.width*r),l=Math.ceil(e.height*r);return this.renderer.renderTarget.copyToTexture(t,s,{x:n,y:a},{width:o,height:l},{x:0,y:0}),s}applyFilter(t,e,i,r){let s=this.renderer,n=this._filterStack[this._filterStackIndex],o=n.bounds,l=a.Point.shared,h=n.previousRenderSurface===i,d=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(d=this._filterStack[p].inputTexture.source._resolution);let f=this._filterGlobalUniforms,g=f.uniforms,x=g.uOutputFrame,_=g.uInputSize,y=g.uInputPixel,b=g.uInputClamp,S=g.uGlobalFrame,T=g.uOutputTexture;if(h){let t=this._filterStackIndex;for(;t>0;){t--;let e=this._filterStack[this._filterStackIndex-1];if(!e.skip){l.x=e.bounds.minX,l.y=e.bounds.minY;break}}x[0]=o.minX-l.x,x[1]=o.minY-l.y}else x[0]=0,x[1]=0;x[2]=e.frame.width,x[3]=e.frame.height,_[0]=e.source.width,_[1]=e.source.height,_[2]=1/_[0],_[3]=1/_[1],y[0]=e.source.pixelWidth,y[1]=e.source.pixelHeight,y[2]=1/y[0],y[3]=1/y[1],b[0]=.5*y[2],b[1]=.5*y[3],b[2]=e.frame.width*_[2]-.5*y[2],b[3]=e.frame.height*_[3]-.5*y[3];let v=this.renderer.renderTarget.rootRenderTarget.colorTexture;S[0]=l.x*d,S[1]=l.y*d,S[2]=v.source.width*d,S[3]=v.source.height*d;let P=this.renderer.renderTarget.getRenderTarget(i);if(s.renderTarget.bind(i,!!r),i instanceof u.Texture?(T[0]=i.frame.width,T[1]=i.frame.height):(T[0]=P.width,T[1]=P.height),T[2]=P.isRoot?-1:1,f.update(),s.renderPipes.uniformBatch){let t=s.renderPipes.uniformBatch.getUboResource(f);this._globalFilterBindGroup.setResource(t,0)}else this._globalFilterBindGroup.setResource(f,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:m,shader:t,state:t._state,topology:"triangle-list"}),s.type===c.RendererType.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new p.Bounds,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(t,e){let i=this._activeFilterData,r=t.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),s=e.worldTransform.copyTo(n.Matrix.shared);return s.invert(),r.prepend(s),r.scale(1/e.texture.frame.width,1/e.texture.frame.height),r.translate(e.anchor.x,e.anchor.y),r}}_.extension={type:[s.ExtensionType.WebGLSystem,s.ExtensionType.WebGPUSystem],name:"filter"}}),r("12Ia0",function(e,r){t(e.exports,"getFastGlobalBounds",()=>o);var s=i("5lJW7"),n=i("9E5o7");let a=new s.Matrix;function o(t,e){return e.clear(),function t(e,i){if(7!==e.localDisplayStatus||!e.measurable)return;let r=!!e.effects.length,s=i;if((e.isRenderGroupRoot||r)&&(s=(0,n.boundsPool).get().clear()),e.boundsArea)i.addRect(e.boundsArea,e.worldTransform);else{if(e.renderPipeId){let t=e.bounds;s.addFrame(t.minX,t.minY,t.maxX,t.maxY,e.groupTransform)}let i=e.children;for(let e=0;e<i.length;e++)t(i[e],s)}if(r){let t=!1;for(let i=0;i<e.effects.length;i++)e.effects[i].addBounds&&(t||(t=!0,s.applyMatrix(e.renderGroup.worldTransform)),e.effects[i].addBounds(s,!0));t&&(s.applyMatrix(e.renderGroup.worldTransform.copyTo(a).invert()),i.addBounds(s,e.relativeGroupTransform)),i.addBounds(s),(0,n.boundsPool).return(s)}else e.isRenderGroupRoot&&(i.addBounds(s,e.relativeGroupTransform),(0,n.boundsPool).return(s))}(t,e),e.isValid||e.set(0,0,0,0),t.isRenderGroupRoot?e.applyMatrix(t.renderGroup.localTransform):e.applyMatrix(t.renderGroup.worldTransform),e}}),r("jDKUc",function(e,i){t(e.exports,"getGlobalRenderableBounds",()=>r);function r(t,e){e.clear();let i=e.matrix;for(let i=0;i<t.length;i++){let r=t[i];r.globalDisplayStatus<7||(e.matrix=r.worldTransform,r.addBounds(e))}return e.matrix=i,e}});