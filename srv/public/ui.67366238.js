function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire6b9f,n=t.register;n("2HvrB",function(n,o){e(n.exports,"UIScene",()=>d);var i=t("cwyqU"),a=t("9W2ra"),r=t("4Gfgx"),l=t("iGzOG"),s=t("eF1lW"),c=t("hKERU"),u=t("1jheB");function d(){(0,r.getInnerWindow)();let e=new l.Scene(a.UISTATE.Engine);e.clearColor=new l.Color4(1,1,1,0),e.ambientColor=new l.Color3(1,1,1);let t=new l.UniversalCamera("ui-camera",new l.Vector3(0,30,0),e);t.fov=(0,l.Tools).ToRadians(70),t.target=new l.Vector3(0,0,0),a.UISTATE.Camera=t,function(e){let t=new l.HemisphericLight("ui-light",new l.Vector3(0,1,0),e);t.diffuse=new l.Color3(.5,.5,.5),t.specular=new l.Color3(0,0,0),t.intensity=1;let n=new l.SpotLight("shield-yar-spot",new l.Vector3(0,10,-25),new l.Vector3(0,-.5,1),(0,l.Tools).ToRadians(60),30,e);n.diffuse=new l.Color3(1,1,1),n.specular=new l.Color3(.2,.1,.05),n.intensity=5,n.shadowEnabled=!0;let o=new l.SpotLight("spot-1",new l.Vector3(0,20,0),new l.Vector3(0,-1,0),(0,l.Tools).ToRadians(120),10,e);o.diffuse=new l.Color3(.4,.3,1),o.specular=new l.Color3(.7,.7,.5),o.intensity=1,o.shadowEnabled=!0}(e),function(e){let t=(0,r.getInnerWindow)(),n=(0,l.MeshBuilder).CreateGround("ground",{width:t.width,height:t.height},e);n.receiveShadows=!0;let o=new l.StandardMaterial("ground-mt",e);o.diffuseColor=new l.Color3(.1,.1,.3),o.maxSimultaneousLights=10,n.material=o}(e),function(e){let t=new l.TransformNode("hero-tn",e),n=(0,l.MeshBuilder).CreateSphere("hero",{diameter:4.5,updatable:!0},e);n.setParent(t),n.rotation.x=(0,l.Tools).ToRadians(-45),n.rotation.y=(0,l.Tools).ToRadians(45),t.position.y=5;let o=new l.StandardMaterial("hero-mat",e);o.diffuseTexture=new l.Texture("public/hero/lava_d.jpg"),o.bumpTexture=new l.Texture("public/hero/lava_n.jpg"),o.ambientTexture=new l.Texture("public/hero/lava_o.jpg"),o.specularTexture=new l.Texture("public/hero/lava_s.jpg"),o.maxSimultaneousLights=10,n.material=o;let i=[{frame:0,value:0},{frame:120,value:(0,l.Tools).ToRadians(359)}],a=new l.Animation("hero-anim","rotation.z",10,l.Animation.ANIMATIONTYPE_FLOAT,l.Animation.ANIMATIONLOOPMODE_CYCLE,!0);a.setKeys(i),t.animations.push(a),e.beginAnimation(t,0,120,!0,1)}(e),function(e){let t=new l.TransformNode("loader-tn",e),n=m(e,new l.Color3(1,.3,.1),new l.Vector3(-5,0,0));n.setParent(t),p(e,new l.Color3(.9,.5,.2),new l.Color3(.6,.2,.25),new l.Vector3(-3,10,0)).parent=n,f(e,n,new l.Color4(.9,.1,.1,.5),new l.Color4(.9,.5,.1,.7)).start();let o=m(e,new l.Color3(.1,.1,1),new l.Vector3(5,0,0));o.setParent(t),p(e,new l.Color3(.2,.5,.9),new l.Color3(.25,.2,.6),new l.Vector3(3,10,0)).parent=o,f(e,o,new l.Color4(.1,.1,.9,.5),new l.Color4(.1,.5,.9,.7)).start(),t.position.y=6;let i=[{frame:0,value:0},{frame:120,value:(0,l.Tools).ToRadians(359)}],a=new l.Animation("ball-anim","rotation.y",20,l.Animation.ANIMATIONTYPE_FLOAT,l.Animation.ANIMATIONLOOPMODE_CYCLE,!0);a.setKeys(i),t.animations.push(a),e.beginAnimation(t,0,120,!0,1)}(e),(0,c.loadShieldYarModel)(e).then(()=>{(function(e,t){let n=new l.TransformNode("shield-yar-tn",t);(0,i.ASSETS).containers3D.get("shield_yar").instantiateModelsToScene(e=>`${e}-shield`,!0).rootNodes[0].getChildMeshes().forEach(e=>{e.receiveShadows=!0,e.setParent(n)}),n.position=e,n.rotation.x=(0,l.Tools).ToRadians(20),n.scaling=new l.Vector3(1,1,1)})(new l.Vector3(0,8,-8),e)}),e.onReadyObservable.add(()=>{(0,s.backSetOpaq_0)(),function(e,t){let n=new l.TransformNode("shield-tn",t),o=(0,l.MeshBuilder).CreatePlane("shield-palne",{width:10,height:8},t);o.receiveShadows=!0,o.setParent(n);let i=new l.Texture("public/sprites/shield.webp",t);i.hasAlpha=!0;let a=new l.StandardMaterial("shield-mt",t);a.diffuseTexture=i,a.alpha=.5,a.opacityTexture=i,a.maxSimultaneousLights=10,o.material=a,n.rotation.y=(0,l.Tools).ToRadians(180),n.rotation.x=(0,l.Tools).ToRadians(90),n.position=e,n.scaling=new l.Vector3(3,3,3)}(new l.Vector3(0,1,-12),e),(0,u.spinMenu)(new l.Vector3(0,0,0),e)});let n=!1;e.onPointerDown=(t,o,i)=>{let a=e.pick(e.pointerX,e.pointerY,()=>!0);n||(a.pickedMesh.name.includes("menu-item-")&&a.pickedMesh.name.includes("Center")&&(0,u.getItemOnPointerDown)(a.pickedMesh.name,a.pickedPoint.x),n=!0,setTimeout(()=>{n=!1},600))},e.onPointerMove=(t,n,o)=>{let i=e.pick(e.pointerX,e.pointerY,()=>!0);i.pickedMesh.name.includes("menu-item-")?i.pickedMesh.name.includes("Center")&&(0,u.menuItemOnPointerMove)(i.pickedMesh.name,i.pickedPoint):(0,u.clearFocusItem)()},a.UISTATE.Scene=e}function m(e,t,n){let o=(0,l.MeshBuilder).CreateSphere("loader-ball",{diameter:1},e),i=new l.StandardMaterial("ball-mt",e);return i.diffuseColor=t,i.emissiveColor=t,i.alpha=.4,o.material=i,o.position.x=n.x,o}function p(e,t,n,o){let i=new l.SpotLight("spot-ball2",o,new l.Vector3(0,-1,0),(0,l.Tools).ToRadians(80),10,e);return i.diffuse=t,i.specular=n,i.intensity=.7,i}function f(e,t,n,o){let i=new l.ParticleSystem("ball-particle",1e3,e);return i.emitter=t,i.particleTexture=new l.Texture("public/sprites/dirt_02.png"),i.maxEmitPower=1,i.minEmitPower=.1,i.emitRate=300,i.color1=n,i.color2=o,i.colorDead=new l.Color4(.1,.1,.1,.5),i.maxLifeTime=2.5,i.minLifeTime=.01,i.minAngularSpeed=1e3,i.maxSize=.9,i.minSize=.01,i.maxEmitBox=new l.Vector3(.3,0,.3),i.minEmitBox=new l.Vector3(-.3,-0,-.3),i.updateSpeed=.02,i.direction1=new l.Vector3(0,0,0),i.direction2=new l.Vector3(0,0,0),i.gravity=new l.Vector3(0,0,0),i.disposeOnStop=!0,i}}),n("1jheB",function(n,o){e(n.exports,"spinMenu",()=>c),e(n.exports,"getItemOnPointerDown",()=>u),e(n.exports,"clearFocusItem",()=>w),e(n.exports,"menuItemOnPointerMove",()=>d);var i=t("cwyqU"),a=t("dHlpp"),r=t("hKERU"),l=t("iGzOG");let s={positions:12,diameter:11,item_size:{width:4,height:4},angle:null,node:null,start_item:0,items:new Map,prefix_item:"menu-item-",deltaZ:90,select_place:1.1,menu_y_position:5,focus_item:null,colors:{standart:"rgb(20,20,150)",focus:"rgb(120,100,10)"}};function c(e,t){s.angle=360/s.positions,(0,r.loadMenuItem2Model)(t).then(()=>{s.node=new l.TransformNode("menu-rotate-tn",t);let n=function(e){let t=new l.TransformNode("item-tn",e);return(0,i.ASSETS).containers3D.get("menu_item").instantiateModelsToScene(e=>e,!0).rootNodes[0].getChildMeshes().forEach(e=>{e.setParent(t)}),t.scaling=new l.Vector3(.6,.6,.6),function(e){e.getChildMeshes().forEach(e=>{e.isVisible=!1})}(t),t}(t);[...Array(s.positions).keys()].forEach(o=>{let i=`${s.prefix_item}${o}`,a=(0,l.Tools).ToRadians(o*s.angle),r=function(e,t,n){let o=e.clone(t.name,null,!1);return o.rotation.z+=t.rotation,o.position=t.position,o.isEnabled(!0),o}(n,{name:i,rotation:a,position:new l.Vector3(e.x+Math.cos(a)*s.diameter,e.y+Math.sin(a)*s.diameter,e.z)},0),c=r.getChildMeshes().filter(e=>e.name.includes("Center"))[0];c&&c instanceof l.Mesh&&function(e,t,n){let o=new l.DynamicTexture("item-menu-txt",{width:1024,height:1024},n);o.hasAlpha=!0,o.uAng=(0,l.Tools).ToRadians(0),o.vAng=(0,l.Tools).ToRadians(0);let i=o.getContext();i.font="70px Arial, serif",f(t,{back_color:s.colors.standart},i),o.update();let a=new l.StandardMaterial("round-menu-mt",n);a.diffuseTexture=o,a.alpha=1,e.material=a}(c,`${o}`,t),function(e){e.getChildMeshes().forEach(e=>{e.isVisible=!0})}(r),s.items.set(i,{item:r,angle:o*s.angle,level:o}),r.setParent(s.node)}),s.node.position=e.add(new l.Vector3(0,s.menu_y_position,0)),function(e){let t=Math.abs((e=e>=0?e:s.positions+e)%s.positions);m(s.items.get(`${s.prefix_item}${t}`).angle+s.deltaZ)}(0)})}function u(e,t){if(e=e.split(".Center")[0],t<-s.select_place)w(),m(s.angle,!0);else if(t>s.select_place)w(),m(-s.angle,!0);else{let t=s.items.get(`${e}`).level;(0,a.GameState).levelRun(t)}}function d(e,t){e=e.split(".Center")[0];let n=s.items.get(`${e}`);t.x<-s.select_place||t.x>s.select_place||function(e){s.focus_item=e;let t=e.item.getChildMeshes().filter(e=>e.name.includes(".Center"))[0].material.diffuseTexture,n=t.getContext();f(`${e.level}`,{back_color:s.colors.focus},n),t.update()}(n)}function m(e,t=!1){t?p(s.node,s.node.rotation.z,s.node.rotation.z+(0,l.Tools).ToRadians(e)):p(s.node,s.node.rotation.z,(0,l.Tools).ToRadians(e))}function p(e,t,n){let o=e.getScene(),i=new l.Animation("spin-menu-anim","rotation.z",60,l.Animation.ANIMATIONTYPE_FLOAT,l.Animation.ANIMATIONLOOPMODE_CONSTANT);i.setKeys([{frame:0,value:t},{frame:60,value:n}]),e.animations.push(i),o.beginAnimation(e,0,60,!1,2)}function f(e,t,n){n.clearRect(0,0,1024,1024),n.fillStyle=t.back_color,n.fillRect(0,0,512,512),h("Level:",60,{x:180,y:350},n),h(e,150,{x:210,y:200},n),h("result: 1200",40,{x:160,y:120},n)}function h(e,t,n,o){o.save(),o.font=`${t}px Arial`,o.translate(n.x,n.y);let i=o.measureText(e).width/2;o.translate(-i,0),o.scale(1,-1),o.fillStyle="rgb(255,255,255)",o.fillText(e,i,0),o.restore()}function w(){if(s.focus_item){let e=s.focus_item.item.getChildMeshes().filter(e=>e.name.includes(".Center"))[0].material.diffuseTexture,t=e.getContext();f(`${s.focus_item.level}`,{back_color:s.colors.standart},t),e.update(),s.focus_item=null}}});