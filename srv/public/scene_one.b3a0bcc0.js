function e(e,t,a,o){Object.defineProperty(e,t,{get:a,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire6b9f,a=t.register;a("dCosV",function(a,o){e(a.exports,"sceneOne",()=>c);var i=t("dHlpp"),n=t("e9gtV"),s=t("bGDFl"),l=t("a8Zow"),r=t("7E4Px"),d=t("5Vkc0"),m=t("iGzOG");function c(e,t){var a;let o=function(e,t){let a=new m.Scene(i.AGAME.Engine);return a.enablePhysics(e,t),a.clearColor=new m.Color4(.05,.04,.06,1),a.ambientColor=new m.Color3(1,.1,1),a}(e,t),c=function(e){let t=new m.UniversalCamera("main-scene-camera",new m.Vector3(0,0,0),e);return t.position=new m.Vector3(0,10,-15),t.fov=(0,m.Tools).ToRadians(75),t.target=(0,m.Vector3).Zero(),t}(o),[h,p,w]=[...function(e){let t=new m.HemisphericLight("main-scene-hemilight",new m.Vector3(0,1,0),e);t.diffuse=new m.Color3(1,1,1),t.intensity=.2;let a=new m.DirectionalLight("main-scene-dirlight",new m.Vector3(0,-1,-1),e);a.position=new m.Vector3(0,20,-20),a.diffuse=new m.Color3(1,1,1),a.specular=new m.Color3(.25,.25,.2),a.intensity=.2;let o=new m.SpotLight("left-scene-spot",new m.Vector3(-(0,i.GameState).gameBox().width/2-2,6,(0,i.GameState).gameBox().height/2+2),new m.Vector3(.5,-.5,-.5),(0,m.Tools).ToRadians(50),10,e);o.diffuse=new m.Color3(.9,.8,.7),o.specular=new m.Color3(.3,.2,.3),o.intensity=.7,o.shadowEnabled=!0;let n=new m.SpotLight("right-scene-spot",new m.Vector3((0,i.GameState).gameBox().width/2+2,6,(0,i.GameState).gameBox().height/2+2),new m.Vector3(-.5,-.5,-.5),(0,m.Tools).ToRadians(50),10,e);n.diffuse=new m.Color3(.9,.8,.7),n.specular=new m.Color3(.3,.2,.3),n.intensity=.7,n.shadowEnabled=!0;let s=new m.ShadowGenerator(1024,a);s.usePoissonSampling=!0,s.useExponentialShadowMap=!0,s.useBlurExponentialShadowMap=!0;let l=new m.ShadowGenerator(1024,o);l.usePoissonSampling=!0,l.useExponentialShadowMap=!0,l.useBlurExponentialShadowMap=!0;let r=new m.ShadowGenerator(1024,n);return r.usePoissonSampling=!0,r.useExponentialShadowMap=!0,r.useBlurExponentialShadowMap=!0,[t,a,[s,l,r]]}(o)];i.GameState.state.gameObjects.globalTransformNode=new m.TransformNode("global-transform-node",o),i.GameState.state.gameObjects.worldNode=function(e){let t=new m.TransformNode("world-transform-node",e),a=(0,m.MeshBuilder).CreateGround("ground",{width:(0,i.GameState).gameBox().width,height:(0,i.GameState).gameBox().height,updatable:!0},e);a.receiveShadows=!0;let o=new m.StandardMaterial(`${a.name}-mt`,e);o.diffuseColor=new m.Color3(.21,.19,.21),o.maxSimultaneousLights=10,a.material=o;let n=(0,m.MeshBuilder).CreateBox("left-wall",{width:.1,height:2,depth:(0,i.GameState).gameBox().height,updatable:!0},e);n.position=new m.Vector3(-(0,i.GameState).gameBox().width/2,1,0);let s=new m.StandardMaterial("wall-mt",e);s.diffuseColor=new m.Color3(.3,.25,.35),s.alpha=.5,n.material=s;let l=n.clone("right-wall",t,!0,!1);l.position=new m.Vector3((0,i.GameState).gameBox().width/2,1,0);let r=(0,m.MeshBuilder).CreateBox("up-wall",{width:(0,i.GameState).gameBox().width,height:2,depth:.1,updatable:!0},e);r.position=new m.Vector3(0,1,(0,i.GameState).gameBox().height/2),r.material=s,a.parent=t,n.parent=t,l.parent=t,r.parent=t,t.position.x-=.2;let d=new m.PhysicsBody(a,m.PhysicsMotionType.STATIC,!1,e),c=new m.PhysicsShapeConvexHull(a,e);c.material={restitution:i.GameState.state.physicsMaterial.ground.restitution,friction:i.GameState.state.physicsMaterial.ground.friction},d.shape=c;let h=new m.PhysicsBody(l,m.PhysicsMotionType.STATIC,!1,e),p=new m.PhysicsShapeConvexHull(l,e);p.material={restitution:i.GameState.state.physicsMaterial.wall.restitution,friction:i.GameState.state.physicsMaterial.wall.friction},h.shape=p;let w=new m.PhysicsBody(n,m.PhysicsMotionType.STATIC,!1,e),S=new m.PhysicsShapeConvexHull(n,e);S.material={restitution:i.GameState.state.physicsMaterial.wall.restitution,friction:i.GameState.state.physicsMaterial.wall.friction},w.shape=S;let u=new m.PhysicsBody(r,m.PhysicsMotionType.STATIC,!1,e),g=new m.PhysicsShapeConvexHull(r,e);return g.material={restitution:i.GameState.state.physicsMaterial.wall.restitution,friction:i.GameState.state.physicsMaterial.wall.friction},u.shape=g,t}(o);let[S,u,g]=(0,r.shildComposition)(o);return i.GameState.state.gameObjects.scene=o,i.GameState.state.gameObjects.camera=c,i.GameState.state.gameObjects.damageNodes=[],i.GameState.state.gameObjects.shield=S,i.GameState.state.gameObjects.ball=(0,n.ballComposition)(o),i.GameState.state.gameObjects.shadow=w,i.GameState.state.gameObjects.physicsHelper=new m.PhysicsHelper(o),i.GameState.state.gameObjects.points=(0,l.initPoints)(o),(0,m.MeshBuilder).CreateLines("up-line",{points:[new m.Vector3(i.GameState.state.dragBox.left,.1,i.GameState.state.dragBox.up),new m.Vector3(0,.1,i.GameState.state.dragBox.up),new m.Vector3(i.GameState.state.dragBox.rigth,.1,i.GameState.state.dragBox.up)],colors:[new m.Color4(.3,.5,.5,1),new m.Color4(.9,.5,.5,1),new m.Color4(.3,.5,.5,1)]},i.GameState.state.gameObjects.scene),(0,m.MeshBuilder).CreateLines("down-line",{points:[new m.Vector3(i.GameState.state.dragBox.left,.1,i.GameState.state.dragBox.down),new m.Vector3(0,.1,i.GameState.state.dragBox.down),new m.Vector3(i.GameState.state.dragBox.rigth,.1,i.GameState.state.dragBox.down)],colors:[new m.Color4(.3,.5,.5,1),new m.Color4(.9,.5,.5,1),new m.Color4(.3,.5,.5,1)]},i.GameState.state.gameObjects.scene),(0,n.addShadowToBall)(w,o),(0,r.addShadowToShield)(w,o),i.GameState.state.gameObjects.worldNode.scaling=new m.Vector3(2,2,2),(0,n.addRun$)(),(0,r.addPosition$)(()=>{}),i.GameState.state.gameObjects.ball,o.onPointerDown=(e,t,a)=>{(function(e,t,a){let o=a.pick(a.pointerX,a.pointerY,()=>!0);(0,d.clampToBoxShieldPosition)(o.pickedPoint,t,1),i.GameState.state.isDragShield=!0})(0,S,o)},o.onPointerUp=(e,t,a)=>{i.GameState.state.isDragShield&&(i.GameState.state.isDragShield=!1,(0,n.onRun$)())},o.onPointerMove=(e,t,a)=>{(function(e,t,a){if(i.GameState.state.isDragShield){let e=a.pick(a.pointerX,a.pointerY,()=>!0);(0,d.clampToBoxShieldPosition)(e.pickedPoint,t,1)}})(0,S,o)},o.onBeforeRenderObservable.add(()=>{i.GameState.state.isBallStart||(0,i.GameState).state.gameObjects.ball.getPhysicsBody().setTargetTransform((0,i.GameState).state.gameObjects.shield.position.clone().add(new m.Vector3(0,0,.5)),(0,m.Quaternion).Identity()),(0,i.AGAME).HVK.setTargetTransform(u.getPhysicsBody(),S.position,(0,m.Quaternion).Identity())}),(0,i.AGAME).HVK.onCollisionObservable.add((e,t)=>{let a=e.collider.transformNode,o=e.collidedAgainst.transformNode;"shield"===o.name||"shield"===a.name||o.name.includes("enemy-bloc")}),(0,i.AGAME).HVK.onCollisionEndedObservable.add((e,t)=>{let a=e.collider.transformNode,o=e.collidedAgainst.transformNode;("ball"===o.name||"ball"===a.name)&&((0,i.GameState).ball().getPhysicsBody(),o.name.includes("enemy-bloc")&&((0,s.enemyCollideReaction)(o),(0,l.newPoints)("10",o.position),(0,i.GameState).calculatePoints(o),(0,i.GameState).isAllEnemiesDie()&&(0,i.GameState).changeGameState(i.GameState.state.signals.LEVEL_WIN)))}),o}}),a("a8Zow",function(a,o){e(a.exports,"initPoints",()=>s),e(a.exports,"newPoints",()=>l);var i=t("dHlpp"),n=t("iGzOG");function s(e){let t=(0,n.MeshBuilder).CreatePlane("points",{size:1},e);return t.billboardMode=n.Mesh.BILLBOARDMODE_ALL,t.isVisible=!1,t}function l(e,t){let a=(0,i.GameState).points().clone();a.position=t.add(new n.Vector3(0,1,0)),a.isVisible=!0;let o=new n.DynamicTexture("points-txt",{width:40,height:40},(0,i.GameState).scene());o.hasAlpha=!0;let s=o.getContext(),l=new n.StandardMaterial("points-mt",(0,i.GameState).scene());l.diffuseTexture=o,l.emissiveTexture=o,a.material=l,s.drawImage((0,i.GameState).sprites().get("points10"),0,0,256,256,0,0,40,40),o.update(),function(e){let t=[{frame:0,value:e.position.y},{frame:60,value:e.position.y+5}],a=new n.Animation("points-anim","position.y",60,n.Animation.ANIMATIONTYPE_FLOAT,n.Animation.ANIMATIONLOOPMODE_CONSTANT,!1);a.setKeys(t),e.animations.push(a),(0,i.GameState).scene().beginAnimation(e,0,120,!1,1,()=>{e.dispose()})}(a)}}),a("7E4Px",function(a,o){e(a.exports,"shildComposition",()=>s),e(a.exports,"addShadowToShield",()=>l),e(a.exports,"addPosition$",()=>r);var i=t("dHlpp"),n=t("iGzOG");function s(e){let t=new n.TransformNode("shield-transform-node",e),a=function(e,t){let a=(0,n.MeshBuilder).CreateBox("shield",{width:3.5,height:.6,depth:.25,wrap:!0,updatable:!0},e);a.parent=t,a.receiveShadows=!0;let o=new n.StandardMaterial("shield-mt",e);o.emissiveColor=new n.Color3(.7,.5,.1),o.alpha=.8,o.maxSimultaneousLights=10,a.material=o;let s=new n.PhysicsBody(a,n.PhysicsMotionType.ANIMATED,!1,e);s.setMassProperties({mass:i.GameState.state.physicsMaterial.shield.mass});let l=new n.PhysicsShapeConvexHull(a,e);return l.material={restitution:i.GameState.state.physicsMaterial.shield.restitution,friction:i.GameState.state.physicsMaterial.shield.friction},s.shape=l,s.setCollisionCallbackEnabled(!0),s.setCollisionEndedCallbackEnabled(!0),a}(e,t),o=function(e,t){let a=(0,n.MeshBuilder).CreatePlane("shield-control-plane",{width:5.5,height:2.5,updatable:!0},e);a.position=new n.Vector3(0,.7,-.5),a.parent=t,a.isPickable=!0,a.rotation.x=(0,n.Tools).ToRadians(90);let o=new n.StandardMaterial("shield-mt",e);return o.diffuseColor=new n.Color3(.1,.1,.1),o.alpha=.2,a.material=o,a}(e,t);return t.position=new n.Vector3(0,.3,-7),t.position$=new n.Observable,[t,a,o]}function l(e,t){e.forEach(e=>{e.addShadowCaster(t.getMeshByName("shield"),!1)})}function r(e){(0,i.GameState).state.gameObjects.shield.position$.add(()=>{e()})}});