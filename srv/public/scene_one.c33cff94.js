function e(e,t,a,o){Object.defineProperty(e,t,{get:a,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire6b9f,a=t.register;a("dCosV",function(a,o){e(a.exports,"sceneOne",()=>S);var i=t("dHlpp"),s=t("d6hv1"),n=t("e9gtV"),l=t("BCSQM"),r=t("bGDFl"),d=t("a8Zow"),m=t("7E4Px"),c=t("5Vkc0"),h=t("iGzOG");function S(e,t){let a=function(e,t){let a=new h.Scene(s.AGAME.Engine);return a.enablePhysics(e,t),a.clearColor=new h.Color4(.05,.04,.06,1),a.ambientColor=new h.Color3(1,.1,1),a}(e,t),o=function(e){let t=new h.UniversalCamera("main-scene-camera",new h.Vector3(0,0,0),e);return t.position=new h.Vector3(0,10,-15),t.fov=(0,h.Tools).ToRadians(75),t.target=(0,h.Vector3).Zero(),t}(a),[S,p,w]=[...function(e){let t=new h.HemisphericLight("main-scene-hemilight",new h.Vector3(0,1,-8),e);t.diffuse=new h.Color3(1,1,1),t.specular=new h.Color3(1,1,1),t.intensity=.3;let a=new h.HemisphericLight("enemy-hemilight",new h.Vector3(0,1,-8),(0,i.GameState).scene());a.diffuse=new h.Color3(1,1,1),a.specular=new h.Color3(1,1,1),a.intensity=1,i.GameState.state.enemyLight=a;let o=new h.DirectionalLight("main-scene-dirlight",new h.Vector3(0,-1,-5),e);o.position=new h.Vector3(0,20,-20),o.diffuse=new h.Color3(1,1,1),o.specular=new h.Color3(.25,.25,.2),o.intensity=.1;let s=new h.SpotLight("left-scene-spot",new h.Vector3(-(0,i.GameState).gameBox().width/2-2,6,(0,i.GameState).gameBox().height/2+2),new h.Vector3(.5,-.5,-.5),(0,h.Tools).ToRadians(50),10,e);s.diffuse=new h.Color3(.9,.8,.7),s.specular=new h.Color3(.3,.2,.3),s.intensity=.9,s.shadowEnabled=!0;let n=new h.SpotLight("right-scene-spot",new h.Vector3((0,i.GameState).gameBox().width/2+2,6,(0,i.GameState).gameBox().height/2+2),new h.Vector3(-.5,-.5,-.5),(0,h.Tools).ToRadians(50),10,e);n.diffuse=new h.Color3(.9,.8,.7),n.specular=new h.Color3(.3,.2,.3),n.intensity=.9,n.shadowEnabled=!0;let l=new h.ShadowGenerator(1024,o);l.usePoissonSampling=!0,l.useExponentialShadowMap=!0,l.useBlurExponentialShadowMap=!0;let r=new h.ShadowGenerator(1024,s);r.usePoissonSampling=!0,r.useExponentialShadowMap=!0,r.useBlurExponentialShadowMap=!0;let d=new h.ShadowGenerator(1024,n);return d.usePoissonSampling=!0,d.useExponentialShadowMap=!0,d.useBlurExponentialShadowMap=!0,[t,o,[l,r,d]]}(a)];i.GameState.state.gameObjects.globalTransformNode=new h.TransformNode("global-transform-node",a),i.GameState.state.gameObjects.worldNode=function(e){let t=new h.TransformNode("world-transform-node",e),a=(0,h.MeshBuilder).CreateGround("ground",{width:(0,i.GameState).gameBox().width,height:(0,i.GameState).gameBox().height,updatable:!0},e);a.receiveShadows=!0;let o=new h.StandardMaterial(`${a.name}-mt`,e);o.diffuseColor=new h.Color3(.21,.19,.21),o.maxSimultaneousLights=10,a.material=o;let s=(0,h.MeshBuilder).CreateBox("left-wall",{width:.1,height:4,depth:(0,i.GameState).gameBox().height,updatable:!0},e);s.position=new h.Vector3(-(0,i.GameState).gameBox().width/2,2,0);let n=new h.StandardMaterial("wall-mt",e);n.diffuseColor=new h.Color3(.3,.25,.35),n.alpha=.5,s.material=n;let l=s.clone("right-wall",t,!0,!1);l.position=new h.Vector3((0,i.GameState).gameBox().width/2,2,0);let r=(0,h.MeshBuilder).CreateBox("up-wall",{width:(0,i.GameState).gameBox().width,height:4,depth:.1,updatable:!0},e);r.position=new h.Vector3(0,2,(0,i.GameState).gameBox().height/2),r.material=n,a.parent=t,s.parent=t,l.parent=t,r.parent=t,t.position.x-=.2;let d=new h.PhysicsBody(a,h.PhysicsMotionType.STATIC,!1,e),m=new h.PhysicsShapeConvexHull(a,e);m.filterMembershipMask=(0,i.GameState).CldMasks().ground,m.filterCollideMask=(0,i.GameState).CldMasks().groups.ground,m.material={restitution:i.GameState.state.physicsMaterial.ground.restitution,friction:i.GameState.state.physicsMaterial.ground.friction},d.shape=m;let c=new h.PhysicsBody(l,h.PhysicsMotionType.STATIC,!1,e),S=new h.PhysicsShapeConvexHull(l,e);S.filterMembershipMask=(0,i.GameState).CldMasks().ground,S.filterCollideMask=(0,i.GameState).CldMasks().groups.ground,S.material={restitution:i.GameState.state.physicsMaterial.wall.restitution,friction:i.GameState.state.physicsMaterial.wall.friction},c.shape=S;let p=new h.PhysicsBody(s,h.PhysicsMotionType.STATIC,!1,e),w=new h.PhysicsShapeConvexHull(s,e);w.filterMembershipMask=(0,i.GameState).CldMasks().ground,w.filterCollideMask=(0,i.GameState).CldMasks().groups.ground,w.material={restitution:i.GameState.state.physicsMaterial.wall.restitution,friction:i.GameState.state.physicsMaterial.wall.friction},p.shape=w;let u=new h.PhysicsBody(r,h.PhysicsMotionType.STATIC,!1,e),g=new h.PhysicsShapeConvexHull(r,e);return g.filterMembershipMask=(0,i.GameState).CldMasks().ground,g.filterCollideMask=(0,i.GameState).CldMasks().groups.ground,g.material={restitution:i.GameState.state.physicsMaterial.wall.restitution,friction:i.GameState.state.physicsMaterial.wall.friction},u.shape=g,t}(a);let[u,g,G]=(0,m.shildComposition)(a);i.GameState.state.gameObjects.scene=a,i.GameState.state.gameObjects.camera=o,i.GameState.state.gameObjects.damageNodes=[],i.GameState.state.gameObjects.shield_node=u,i.GameState.state.gameObjects.shield_body=g,i.GameState.state.gameObjects.ball=(0,n.ballComposition)(a),i.GameState.state.gameObjects.shadow=w,i.GameState.state.gameObjects.physicsHelper=new h.PhysicsHelper(a),i.GameState.state.gameObjects.points=(0,d.initPoints)(a),(0,h.MeshBuilder).CreateLines("up-line",{points:[new h.Vector3(i.GameState.state.dragBox.left,.1,i.GameState.state.dragBox.up),new h.Vector3(0,.1,i.GameState.state.dragBox.up),new h.Vector3(i.GameState.state.dragBox.rigth,.1,i.GameState.state.dragBox.up)],colors:[new h.Color4(.3,.5,.5,1),new h.Color4(.9,.5,.5,1),new h.Color4(.3,.5,.5,1)]},i.GameState.state.gameObjects.scene),(0,h.MeshBuilder).CreateLines("down-line",{points:[new h.Vector3(i.GameState.state.dragBox.left,.1,i.GameState.state.dragBox.down),new h.Vector3(0,.1,i.GameState.state.dragBox.down),new h.Vector3(i.GameState.state.dragBox.rigth,.1,i.GameState.state.dragBox.down)],colors:[new h.Color4(.3,.5,.5,1),new h.Color4(.9,.5,.5,1),new h.Color4(.3,.5,.5,1)]},i.GameState.state.gameObjects.scene),(0,n.addShadowToBall)(w,a),s.AGAME.Scene=a,(0,m.addPosition$)(()=>{}),s.AGAME.Scene.onPointerDown=(e,t,a)=>{(function(e,t,a){let o=a.pick(a.pointerX,a.pointerY,()=>!0);(0,c.clampToBoxShieldPosition)(o.pickedPoint,t,1),i.GameState.state.isDragShield=!0})(0,(0,i.GameState).shieldNode(),s.AGAME.Scene)},s.AGAME.Scene.onPointerUp=(e,t,a)=>{var o;s.AGAME.Scene,i.GameState.state.isDragShield&&(i.GameState.state.isDragShield=!1,(0,n.onRun$)())},s.AGAME.Scene.onPointerMove=(e,t,a)=>{(function(e,t,a){if(i.GameState.state.isDragShield){let e=a.pick(a.pointerX,a.pointerY,()=>!0);(0,c.clampToBoxShieldPosition)(e.pickedPoint,t,1)}})(0,(0,i.GameState).shieldNode(),s.AGAME.Scene)},(0,s.AGAME).Scene.onBeforeRenderObservable.add(()=>{i.GameState.state.isBallStart||(0,i.GameState).state.gameObjects.ball.getPhysicsBody().setTargetTransform((0,i.GameState).shieldNode().position.clone().add(new h.Vector3(0,0,.5)),(0,h.Quaternion).Identity()),(0,s.AGAME).HVK.setTargetTransform((0,i.GameState).shieldBody().getPhysicsBody(),(0,i.GameState).shieldNode().position,(0,h.Quaternion).Identity())}),(0,s.AGAME).HVK.onCollisionObservable.add((e,t)=>{if(i.GameState.state.gameState===i.GameState.state.signals.GAME_RUN){let t=e.collider.transformNode,a=e.collidedAgainst.transformNode;a.name.includes("rocket")?t.name.includes("enemy-bloc")&&((0,r.enemyDamageModelEffect)(t),(0,l.rocketDie)(a)):t.name.includes("rocket")&&a.name.includes("enemy-bloc")&&((0,r.enemyDamageModelEffect)(a),(0,l.rocketDie)(t))}}),(0,s.AGAME).HVK.onCollisionEndedObservable.add((e,t)=>{if(i.GameState.state.gameState===i.GameState.state.signals.GAME_RUN&&!i.GameState.state.isResetBall){let t=e.collider.transformNode,a=e.collidedAgainst.transformNode;("ball"===a.name||"ball"===t.name)&&a.name.includes("enemy-bloc")&&((0,n.addVelocityBall)(),(0,r.enemyCollideReaction)(a),(0,i.GameState).calculatePoints(a),(0,c.isAllEnemiesDie)()&&i.GameState.state.gameState!==i.GameState.state.signals.LEVEL_WIN&&(0,i.GameState).changeGameState(i.GameState.state.signals.LEVEL_WIN))}})}}),a("7E4Px",function(a,o){e(a.exports,"shildComposition",()=>l),e(a.exports,"addPosition$",()=>r);var i=t("dHlpp"),s=t("iGzOG");let n={mass:100,restitution:.5,friction:1,position:new s.Vector3(0,.3,-7)};function l(e){let t=new s.TransformNode("shield-transform-node",e),a=function(e,t){let a=(0,s.MeshBuilder).CreateBox("shield",{width:3.5,height:.6,depth:.25,wrap:!0,updatable:!0},e);a.parent=t,a.receiveShadows=!0;let o=new s.StandardMaterial("shield-mt",e);o.emissiveColor=new s.Color3(.7,.5,.1),o.alpha=.8,o.maxSimultaneousLights=10,a.material=o;let l=new s.PhysicsBody(a,s.PhysicsMotionType.ANIMATED,!1,e);l.setMassProperties({mass:n.mass});let r=new s.PhysicsShapeConvexHull(a,e);return r.filterMembershipMask=(0,i.GameState).CldMasks().shield,r.filterCollideMask=(0,i.GameState).CldMasks().groups.shield,r.material={restitution:n.restitution,friction:n.friction},l.shape=r,l.setCollisionCallbackEnabled(!0),l.setCollisionEndedCallbackEnabled(!0),a}(e,t),o=function(e,t){let a=(0,s.MeshBuilder).CreatePlane("shield-control-plane",{width:5.5,height:2.5,updatable:!0},e);a.position=new s.Vector3(0,.7,-.5),a.parent=t,a.isPickable=!0,a.rotation.x=(0,s.Tools).ToRadians(90);let o=new s.StandardMaterial("shield-mt",e);return o.diffuseColor=new s.Color3(.1,.1,.1),o.alpha=0,a.material=o,a}(e,t);return t.position=n.position,t.position$=new s.Observable,[t,a,o]}function r(e){(0,i.GameState).shieldNode().position$.add(()=>{e()})}});