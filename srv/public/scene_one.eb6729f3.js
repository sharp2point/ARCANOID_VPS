!function(e,t,a,o,s){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof n[o]&&n[o],r=i.cache||{},l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function d(t,a){if(!r[t]){if(!e[t]){var s="function"==typeof n[o]&&n[o];if(!a&&s)return s(t,!0);if(i)return i(t,!0);if(l&&"string"==typeof t)return l(t);var m=Error("Cannot find module '"+t+"'");throw m.code="MODULE_NOT_FOUND",m}h.resolve=function(a){var o=e[t][1][a];return null!=o?o:a},h.cache={};var c=r[t]=new d.Module(t);e[t][0].call(c.exports,h,c,c.exports,this)}return r[t].exports;function h(e){var t=h.resolve(e);return!1===t?{}:d(t)}}d.isParcelRequire=!0,d.Module=function(e){this.id=e,this.bundle=d,this.exports={}},d.modules=e,d.cache=r,d.parent=i,d.register=function(t,a){e[t]=[function(e,t){t.exports=a},{}]},Object.defineProperty(d,"root",{get:function(){return n[o]}}),n[o]=d;for(var m=0;m<t.length;m++)d(t[m])}({eXVRz:[function(e,t,a){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(a),o.export(a,"sceneOne",()=>h);var s=e("@/game_state/game_state"),n=e("@/game_state/main/state"),i=e("@/objects/ball"),r=e("@/objects/enemy/enemy"),l=e("@/objects/points/points"),d=e("@/objects/shield"),m=e("@/utils/utility"),c=e("@babylonjs/core");function h(e,t){let a=function(e,t){let a=new c.Scene(n.AGAME.Engine);return a.enablePhysics(e,t),a.clearColor=new c.Color4(.05,.04,.06,1),a.ambientColor=new c.Color3(1,.1,1),a}(e,t),o=function(e){let t=new c.UniversalCamera("main-scene-camera",new c.Vector3(0,0,0),e);return t.position=new c.Vector3(0,10,-15),t.fov=(0,c.Tools).ToRadians(75),t.target=(0,c.Vector3).Zero(),t}(a),[h,p,u]=[...function(e){let t=new c.HemisphericLight("main-scene-hemilight",new c.Vector3(0,1,-8),e);t.diffuse=new c.Color3(1,1,1),t.specular=new c.Color3(1,1,1),t.intensity=.3;let a=new c.HemisphericLight("enemy-hemilight",new c.Vector3(0,1,-8),(0,s.GameState).scene());a.diffuse=new c.Color3(1,1,1),a.specular=new c.Color3(1,1,1),a.intensity=1,s.GameState.state.enemyLight=a;let o=new c.DirectionalLight("main-scene-dirlight",new c.Vector3(0,-1,-5),e);o.position=new c.Vector3(0,20,-20),o.diffuse=new c.Color3(1,1,1),o.specular=new c.Color3(.25,.25,.2),o.intensity=.1;let n=new c.SpotLight("left-scene-spot",new c.Vector3(-(0,s.GameState).gameBox().width/2-2,6,(0,s.GameState).gameBox().height/2+2),new c.Vector3(.5,-.5,-.5),(0,c.Tools).ToRadians(50),10,e);n.diffuse=new c.Color3(.9,.8,.7),n.specular=new c.Color3(.3,.2,.3),n.intensity=.9,n.shadowEnabled=!0;let i=new c.SpotLight("right-scene-spot",new c.Vector3((0,s.GameState).gameBox().width/2+2,6,(0,s.GameState).gameBox().height/2+2),new c.Vector3(-.5,-.5,-.5),(0,c.Tools).ToRadians(50),10,e);i.diffuse=new c.Color3(.9,.8,.7),i.specular=new c.Color3(.3,.2,.3),i.intensity=.9,i.shadowEnabled=!0;let r=new c.ShadowGenerator(1024,o);r.usePoissonSampling=!0,r.useExponentialShadowMap=!0,r.useBlurExponentialShadowMap=!0;let l=new c.ShadowGenerator(1024,n);l.usePoissonSampling=!0,l.useExponentialShadowMap=!0,l.useBlurExponentialShadowMap=!0;let d=new c.ShadowGenerator(1024,i);return d.usePoissonSampling=!0,d.useExponentialShadowMap=!0,d.useBlurExponentialShadowMap=!0,[t,o,[r,l,d]]}(a)];s.GameState.state.gameObjects.globalTransformNode=new c.TransformNode("global-transform-node",a),s.GameState.state.gameObjects.worldNode=function(e){let t=new c.TransformNode("world-transform-node",e),a=(0,c.MeshBuilder).CreateGround("ground",{width:(0,s.GameState).gameBox().width,height:(0,s.GameState).gameBox().height,updatable:!0},e);a.receiveShadows=!0;let o=new c.StandardMaterial(`${a.name}-mt`,e);o.diffuseColor=new c.Color3(.21,.19,.21),o.maxSimultaneousLights=10,a.material=o;let n=(0,c.MeshBuilder).CreateBox("left-wall",{width:.1,height:2,depth:(0,s.GameState).gameBox().height,updatable:!0},e);n.position=new c.Vector3(-(0,s.GameState).gameBox().width/2,1,0);let i=new c.StandardMaterial("wall-mt",e);i.diffuseColor=new c.Color3(.3,.25,.35),i.alpha=.5,n.material=i;let r=n.clone("right-wall",t,!0,!1);r.position=new c.Vector3((0,s.GameState).gameBox().width/2,1,0);let l=(0,c.MeshBuilder).CreateBox("up-wall",{width:(0,s.GameState).gameBox().width,height:2,depth:.1,updatable:!0},e);l.position=new c.Vector3(0,1,(0,s.GameState).gameBox().height/2),l.material=i,a.parent=t,n.parent=t,r.parent=t,l.parent=t,t.position.x-=.2;let d=new c.PhysicsBody(a,c.PhysicsMotionType.STATIC,!1,e),m=new c.PhysicsShapeConvexHull(a,e);m.material={restitution:s.GameState.state.physicsMaterial.ground.restitution,friction:s.GameState.state.physicsMaterial.ground.friction},d.shape=m;let h=new c.PhysicsBody(r,c.PhysicsMotionType.STATIC,!1,e),p=new c.PhysicsShapeConvexHull(r,e);p.material={restitution:s.GameState.state.physicsMaterial.wall.restitution,friction:s.GameState.state.physicsMaterial.wall.friction},h.shape=p;let u=new c.PhysicsBody(n,c.PhysicsMotionType.STATIC,!1,e),S=new c.PhysicsShapeConvexHull(n,e);S.material={restitution:s.GameState.state.physicsMaterial.wall.restitution,friction:s.GameState.state.physicsMaterial.wall.friction},u.shape=S;let w=new c.PhysicsBody(l,c.PhysicsMotionType.STATIC,!1,e),f=new c.PhysicsShapeConvexHull(l,e);return f.material={restitution:s.GameState.state.physicsMaterial.wall.restitution,friction:s.GameState.state.physicsMaterial.wall.friction},w.shape=f,t}(a);let[S,w,f]=(0,d.shildComposition)(a);s.GameState.state.gameObjects.scene=a,s.GameState.state.gameObjects.camera=o,s.GameState.state.gameObjects.damageNodes=[],s.GameState.state.gameObjects.shield_node=S,s.GameState.state.gameObjects.shield_body=w,s.GameState.state.gameObjects.ball=(0,i.ballComposition)(a),s.GameState.state.gameObjects.shadow=u,s.GameState.state.gameObjects.physicsHelper=new c.PhysicsHelper(a),s.GameState.state.gameObjects.points=(0,l.initPoints)(a),(0,c.MeshBuilder).CreateLines("up-line",{points:[new c.Vector3(s.GameState.state.dragBox.left,.1,s.GameState.state.dragBox.up),new c.Vector3(0,.1,s.GameState.state.dragBox.up),new c.Vector3(s.GameState.state.dragBox.rigth,.1,s.GameState.state.dragBox.up)],colors:[new c.Color4(.3,.5,.5,1),new c.Color4(.9,.5,.5,1),new c.Color4(.3,.5,.5,1)]},s.GameState.state.gameObjects.scene),(0,c.MeshBuilder).CreateLines("down-line",{points:[new c.Vector3(s.GameState.state.dragBox.left,.1,s.GameState.state.dragBox.down),new c.Vector3(0,.1,s.GameState.state.dragBox.down),new c.Vector3(s.GameState.state.dragBox.rigth,.1,s.GameState.state.dragBox.down)],colors:[new c.Color4(.3,.5,.5,1),new c.Color4(.9,.5,.5,1),new c.Color4(.3,.5,.5,1)]},s.GameState.state.gameObjects.scene),(0,i.addShadowToBall)(u,a),(0,d.addShadowToShield)(u,a),n.AGAME.Scene=a,(0,d.addPosition$)(()=>{}),n.AGAME.Scene.onPointerDown=(e,t,a)=>{(function(e,t,a){let o=a.pick(a.pointerX,a.pointerY,()=>!0);(0,m.clampToBoxShieldPosition)(o.pickedPoint,t,1),s.GameState.state.isDragShield=!0})(0,(0,s.GameState).shieldNode(),n.AGAME.Scene)},n.AGAME.Scene.onPointerUp=(e,t,a)=>{var o;n.AGAME.Scene,s.GameState.state.isDragShield&&(s.GameState.state.isDragShield=!1,(0,i.onRun$)())},n.AGAME.Scene.onPointerMove=(e,t,a)=>{(function(e,t,a){if(s.GameState.state.isDragShield){let e=a.pick(a.pointerX,a.pointerY,()=>!0);(0,m.clampToBoxShieldPosition)(e.pickedPoint,t,1)}})(0,(0,s.GameState).shieldNode(),n.AGAME.Scene)},(0,n.AGAME).Scene.onBeforeRenderObservable.add(()=>{s.GameState.state.isBallStart||(0,s.GameState).state.gameObjects.ball.getPhysicsBody().setTargetTransform((0,s.GameState).shieldNode().position.clone().add(new c.Vector3(0,0,.5)),(0,c.Quaternion).Identity()),(0,n.AGAME).HVK.setTargetTransform((0,s.GameState).shieldBody().getPhysicsBody(),(0,s.GameState).shieldNode().position,(0,c.Quaternion).Identity())}),(0,n.AGAME).HVK.onCollisionObservable.add((e,t)=>{if(s.GameState.state.gameState===s.GameState.state.signals.GAME_RUN){let t=e.collider.transformNode,a=e.collidedAgainst.transformNode;"shield"===a.name||"shield"===t.name||a.name.includes("enemy-bloc")}}),(0,n.AGAME).HVK.onCollisionEndedObservable.add((e,t)=>{if(s.GameState.state.gameState===s.GameState.state.signals.GAME_RUN&&!s.GameState.state.isResetBall){let t=e.collider.transformNode,a=e.collidedAgainst.transformNode;("ball"===a.name||"ball"===t.name)&&a.name.includes("enemy-bloc")&&((0,r.enemyCollideReaction)(a),(0,l.newPoints)("10",a.position),(0,s.GameState).calculatePoints(a),(0,m.isAllEnemiesDie)()&&s.GameState.state.gameState!==s.GameState.state.signals.LEVEL_WIN&&(0,s.GameState).changeGameState(s.GameState.state.signals.LEVEL_WIN))}})}},{"@/game_state/game_state":"5qBSL","@/game_state/main/state":"3N3ac","@/objects/ball":"aIxpM","@/objects/enemy/enemy":"aZfC4","@/objects/points/points":"5tz0R","@/objects/shield":"fhJ9g","@/utils/utility":"8IYYd","@babylonjs/core":"1KKys","@parcel/transformer-js/src/esmodule-helpers.js":"XTfsy"}],"5tz0R":[function(e,t,a){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(a),o.export(a,"initPoints",()=>r),o.export(a,"newPoints",()=>l);var s=e("@/game_state/assets/state"),n=e("@/game_state/game_state"),i=e("@babylonjs/core");function r(e){let t=(0,i.MeshBuilder).CreatePlane("points",{size:1},e);return t.billboardMode=i.Mesh.BILLBOARDMODE_ALL,t.isVisible=!1,t}function l(e,t){let a=(0,n.GameState).points().clone();a.position=t.add(new i.Vector3(0,1,0)),a.isVisible=!0;let o=new i.DynamicTexture("points-txt",{width:40,height:40},(0,n.GameState).scene());o.hasAlpha=!0;let r=o.getContext(),l=new i.StandardMaterial("points-mt",(0,n.GameState).scene());l.diffuseTexture=o,l.emissiveTexture=o,a.material=l,r.drawImage((0,s.ASSETS).sprites.get("points10"),0,0,256,256,0,0,40,40),o.update(),function(e){let t=[{frame:0,value:e.position.y},{frame:60,value:e.position.y+5}],a=new i.Animation("points-anim","position.y",60,i.Animation.ANIMATIONTYPE_FLOAT,i.Animation.ANIMATIONLOOPMODE_CONSTANT,!1);a.setKeys(t),e.animations.push(a),(0,n.GameState).scene().beginAnimation(e,0,120,!1,1,()=>{e.dispose()})}(a)}},{"@/game_state/assets/state":"eemMA","@/game_state/game_state":"5qBSL","@babylonjs/core":"1KKys","@parcel/transformer-js/src/esmodule-helpers.js":"XTfsy"}],fhJ9g:[function(e,t,a){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(a),o.export(a,"shildComposition",()=>i),o.export(a,"addShadowToShield",()=>r),o.export(a,"addPosition$",()=>l),o.export(a,"onPosition$",()=>d);var s=e("@/game_state/game_state"),n=e("@babylonjs/core");function i(e){let t=new n.TransformNode("shield-transform-node",e),a=function(e,t){let a=(0,n.MeshBuilder).CreateBox("shield",{width:3.5,height:.6,depth:.25,wrap:!0,updatable:!0},e);a.parent=t,a.receiveShadows=!0;let o=new n.StandardMaterial("shield-mt",e);o.emissiveColor=new n.Color3(.7,.5,.1),o.alpha=.8,o.maxSimultaneousLights=10,a.material=o;let i=new n.PhysicsBody(a,n.PhysicsMotionType.ANIMATED,!1,e);i.setMassProperties({mass:s.GameState.state.physicsMaterial.shield.mass});let r=new n.PhysicsShapeConvexHull(a,e);return r.material={restitution:s.GameState.state.physicsMaterial.shield.restitution,friction:s.GameState.state.physicsMaterial.shield.friction},i.shape=r,i.setCollisionCallbackEnabled(!0),i.setCollisionEndedCallbackEnabled(!0),a}(e,t),o=function(e,t){let a=(0,n.MeshBuilder).CreatePlane("shield-control-plane",{width:5.5,height:2.5,updatable:!0},e);a.position=new n.Vector3(0,.7,-.5),a.parent=t,a.isPickable=!0,a.rotation.x=(0,n.Tools).ToRadians(90);let o=new n.StandardMaterial("shield-mt",e);return o.diffuseColor=new n.Color3(.1,.1,.1),o.alpha=.2,a.material=o,a}(e,t);return t.position=new n.Vector3(0,.3,-7),t.position$=new n.Observable,[t,a,o]}function r(e,t){e.forEach(e=>{e.addShadowCaster(t.getMeshByName("shield"),!1)})}function l(e){(0,s.GameState).shieldNode().position$.add(()=>{e()})}function d(){(0,s.GameState).shieldNode().position$.notifyObservers()}},{"@/game_state/game_state":"5qBSL","@babylonjs/core":"1KKys","@parcel/transformer-js/src/esmodule-helpers.js":"XTfsy"}]},[],0,"parcelRequire6b9f");